YUI.add("bewype-layout-designer-config",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-config";A.ATTRS={designerClass:{value:"layout-designer",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},sourceHeight:{value:40,validator:function(C){return B.Lang.isNumber(C);}},sourceWidth:{value:140,validator:function(C){return B.Lang.isNumber(C);}},sourceGroups:{value:["horizontal","text","image"],writeOnce:true},sourceLabels:{value:["Layout Horizontal","Text","Image"],writeOnce:true},targetOverHeight:{value:20,validator:function(C){return B.Lang.isNumber(C);}},targetMinHeight:{value:8,validator:function(C){return B.Lang.isNumber(C);}},targetOverWidth:{value:20,validator:function(C){return B.Lang.isNumber(C);}},targetMinWidth:{value:8,validator:function(C){return B.Lang.isNumber(C);}},targetZIndex:{value:1,validator:function(C){return B.Lang.isNumber(C);}},contentHeight:{value:40,validator:function(C){return B.Lang.isNumber(C);}},contentWidth:{value:40,validator:function(C){return B.Lang.isNumber(C);}},contentZIndex:{value:1,validator:function(C){return B.Lang.isNumber(C);}},defaultContent:{value:"Text..",validator:function(C){return B.Lang.isString(C);}},baseNode:{value:null,writeOnce:true},parentNode:{value:null},layoutWidth:{value:600,validator:function(C){return B.Lang.isNumber(C);}},placesType:{value:"vertical",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},contentType:{value:"text",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},defaultText:{value:"Text ...",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},defaultImg:{value:B.config.base+"bewype-layout-designer/assets/blank.png",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},editorTextButtons:{value:["height","width","bold","italic","underline","title","font-family","font-size","text-align","color","background-color","url","reset","apply"]},editorImageButtons:{value:["file","background-color","height","width","padding-top","padding-right","padding-bottom","padding-left","reset","apply"]},useBorder:{value:true,writeOnce:true},boderStyle:{value:"1px dashed grey",writeOnce:true},startingType:{value:"vertical",writeOnce:true,validator:function(C){return B.Lang.isString(C);}}};B.extend(A,B.Plugin.Base);B.namespace("Bewype");B.Bewype.LayoutDesignerConfig=A;},"@VERSION@",{requires:["plugin"]});YUI.add("bewype-layout-designer-base",function(A){var B=function(C){B.superclass.constructor.apply(this,arguments);};B.NODE_SRC_TEMPLATE='<div class="{designerClass}-sources"></div>';B.NODE_PAN_TEMPLATE='<div class="{designerClass}-edit-panel"></div>';B.NODE_LAYOUT_TEMPLATE='<div class="{designerClass}-layout"><ul /></div>';B.NAME="layout-designer";B.NS="layoutDesigner";A.extend(B,A.Bewype.LayoutDesignerConfig,{nodeSource:null,nodeLayout:null,_dropHitGotcha:function(O){var M=this.get("host"),F=O.target.get("node"),P=this.get("designerClass"),E="."+P+"-content",K="."+P+"-src",J=F.one(E)||F.one(K),D=J.get("tagName").toLowerCase(),N=F.ancestor("ul"),G=null,L=null,C=null,H=null,I=null;if(!N.layoutDesignerPlaces){return;}else{if(J.layoutDesignerContent){G=J.layoutDesignerContent.get("parentNode");}else{if(J.layoutDesignerPlaces){G=J.layoutDesignerPlaces.get("parentNode");}else{L=this.getAttrs();L.baseNode=M;L.parentNode=M;if(D==="div"){L.contentType="text";J.plug(A.Bewype.LayoutDesignerContent,L);this.nodeSource.layoutDesignerSources.addTextSource();}else{if(D==="img"){L.contentType="image";J.plug(A.Bewype.LayoutDesignerContent,L);this.nodeSource.layoutDesignerSources.addImageSource();}else{if(D==="table"){I=A.Node.create("<ul/>");J.all("td").each(function(R,Q){var U=this.getAttrs(),T=R.one("div").cloneNode(true),S=A.Node.create("<li />");S.append(T);I.append(S);},this);J.replace(I);L.placesType=this.get("startingType")==="horizontal"?"vertical":"horizontal";J.plug(A.Bewype.LayoutDesignerPlaces,L);this.nodeSource.layoutDesignerSources.addRowSource();}else{return;}}}}}}if(G!=N){if(G){G.layoutDesignerPlaces.unRegisterContent(J);}N.layoutDesignerPlaces.registerContent(J);if(J.layoutDesignerContent){J.layoutDesignerContent.set("parentNode",N);}else{J.layoutDesignerPlaces.set("parentNode",N);}C=N.layoutDesignerPlaces.getMaxWidth();H=N.layoutDesignerPlaces.refresh(C);if(J.layoutDesignerContent){J.layoutDesignerContent.get("host").setStyle("width",H);}}},initializer:function(C){this.setAttrs(C);var E=this.get("host"),F=null,D=this.get("designerClass"),G=this.get("layoutWidth");C.baseNode=E;C.placesType=this.get("startingType");this.nodeSource=new A.Node.create(A.substitute(B.NODE_SRC_TEMPLATE,{designerClass:D}));E.append(this.nodeSource);this.nodeSource.plug(A.Bewype.LayoutDesignerSources,C);F=new A.Node.create(A.substitute(B.NODE_PAN_TEMPLATE,{designerClass:D}));E.append(F);this.nodeLayout=new A.Node.create(A.substitute(B.NODE_LAYOUT_TEMPLATE,{designerClass:D}));E.append(this.nodeLayout);this.nodeLayout.setStyle("width",G);this.nodeLayout.one("ul").plug(A.Bewype.LayoutDesignerPlaces,C);this.nodeLayout.one("ul").layoutDesignerPlaces.refresh();A.DD.DDM.on("drag:end",A.bind(this._dropHitGotcha,this));},destructor:function(){var E=this.get("host"),D=this.get("designerClass"),F=E.one("."+D+"-sources"),C=E.one("."+D+"-edit-panel"),G=this.nodeLayout.one("table")||this.nodeLayout.one("ul");F.remove();C.remove();this.nodeLayout.unplug(A.Bewype.LayoutDesignerPlaces);if(G){this.nodeLayout.replace(G);}else{this.nodeLayout.remove();}},getContents:function(){if(this.nodeLayout.layoutDesignerPlaces){return this.nodeLayout.layoutDesignerPlaces.getContents();}else{return[];}}});A.namespace("Bewype");A.Bewype.LayoutDesigner=B;},"@VERSION@",{requires:["bewype-layout-designer-sources","bewype-layout-designer-target"]});YUI.add("bewype-layout-designer-content",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-content";A.NS="layoutDesignerContent";B.extend(A,B.Bewype.LayoutDesignerConfig,{_q:null,editing:false,initializer:function(C){this.setAttrs(C);
var E=this.get("host"),D=this.get("designerClass"),F=this.get("contentType");E.removeClass(D+"-src");E.addClass(D+"-content");E.addClass(D+"-content-"+F);B.on("mouseenter",B.bind(this._onMouseEnter,this),E);this._q=new B.AsyncQueue();},destructor:function(){var E=this.get("host"),F=this.get("parentNode"),D=this.get("designerClass")+"-content",C=this.getCloneNode();if(this.editing===true){this._detachEditor();}F.layoutDesignerPlaces.unRegisterContent(E);E.detachAll("mouseenter");if(C){C.one("."+D+"-clone-edit").detachAll("click");C.one("."+D+"-clone-remove").detachAll("click");C.remove();}},getCloneNode:function(){var E=this.get("host"),C=E.ancestor("div"),D=this.get("designerClass")+"-content";return C.one("div."+D+"-clone");},hideClone:function(C){C=C||this.getCloneNode();if(C){B.each(C.all("div"),function(E,D){E.setStyle("visibility","hidden");});C.setStyle("visibility","hidden");}},_addCloneNode:function(){var G=this.get("host"),D=G.ancestor("div"),F=this.get("designerClass")+"-content",E=new B.Node.create('<div class="'+F+'-clone" />'),C=new B.Node.create('<div class="'+F+'-clone-callbacks" />'),H=null,I=null;D.append(E);E.setStyle("bottom",0);E.setStyle("left",1);E.setStyle("position","absolute");E.setStyle("z-index",this.get("contentZIndex"));E.append(C);H=new B.Node.create('<div class="'+F+'-clone-edit" />');C.append(H);B.on("click",B.bind(this._onClickEdit,this),H);I=new B.Node.create('<div class="'+F+'-clone-remove" />');C.append(I);B.on("click",B.bind(this._onClickRemove,this),I);this._refreshCloneNode();return E;},_attachEditor:function(){var M=this.get("host"),G=this.get("baseNode"),D=this.get("parentNode"),L=this.get("designerClass")+"-sources",K=this.get("designerClass")+"-edit-panel",Q=G.one("div."+L),J=G.one("div."+K),P=D.layoutDesignerPlaces,F=P.get("placesType"),I=this.get("contentType")==="image"?B.Bewype.EditorTag:B.Bewype.EditorText,E=this.get("contentType")==="image"?"editorImageButtons":"editorTextButtons",H=null,O=null,N=(F==="vertical")?P.get("parentNode"):null,C=N?N.layoutDesignerPlaces:null;Q.setStyle("display","none");J.setStyle("display","block");if(F==="vertical"){O=D.layoutDesignerPlaces.getMaxWidth();O+=C?C.getAvailablePlace():0;}else{O=D.layoutDesignerPlaces.getAvailablePlace();O+=this.getContentWidth();}H={panelNode:J,spinnerMaxWidth:O,activeButtons:this.get(E)};M.plug(I,H);B.on("bewype-editor:onClose",B.bind(this._detachEditor,this),M);B.on("bewype-editor:onChange",B.bind(this.refresh,this),M);this.editing=true;},_detachEditor:function(){var F=this.get("host"),E=this.get("baseNode"),I=this.get("designerClass")+"-sources",D=this.get("designerClass")+"-edit-panel",H=E.one("div."+I),C=E.one("div."+D),G=this.get("contentType")==="image"?B.Bewype.EditorTag:B.Bewype.EditorText;this.editing=false;if(C&&C.bewypeEditorPanel){C.unplug(B.Bewype.EditorPanel);F.unplug(G);F.detachAll("bewype-editor:onClose");F.detachAll("bewype-editor:onChange");this.refresh();}if(C){C.setStyle("display","none");}if(H){H.setStyle("display","block");}this._refreshCloneNode();return true;},_onClickEdit:function(C){var D=this.get("parentNode");B.each(D.layoutDesignerPlaces.getContents(),function(F,E){F.layoutDesignerContent._detachEditor();});this._attachEditor();},_onClickRemove:function(C){var D=this.get("host"),E=this.get("parentNode");E.layoutDesignerPlaces.removeContent(D);},_onMouseEnter:function(C){if(this.editing){return;}var E=this.get("parentNode"),D=this.getCloneNode();E.layoutDesignerPlaces.cleanContentOver();if(D){B.each(D.all("div"),function(G,F){G.setStyle("visibility","visible");});D.setStyle("visibility","visible");}else{D=this._addCloneNode();}this._q.stop();this._q.add({fn:function(){},timeout:1000},{fn:this.hideClone,args:[D]});this._q.run();},getContentHeight:function(){var D=this.get("host"),C=B.Bewype.Utils.getHeight(D),F=B.Bewype.Utils.getStyleValue(D,"paddingTop")||0,E=B.Bewype.Utils.getStyleValue(D,"paddingBottom")||0;return C+F+E+2;},getContentWidth:function(){var E=this.get("host"),F=B.Bewype.Utils.getWidth(E),D=B.Bewype.Utils.getStyleValue(E,"paddingRight")||0,C=B.Bewype.Utils.getStyleValue(E,"paddingLeft")||0;return F+C+D+2;},_refreshCloneNode:function(E){var D=this.getCloneNode(),F=this.getContentHeight(),C=E||this.getContentWidth();if(D){D.setStyle("height",F-2);D.setStyle("width",C-2);}},refresh:function(E){var F=this.get("parentNode"),D=this.get("host"),C=null;if(E){C=this.getContentWidth();C=C>E?E:C;D.setStyle("width",C);D.setStyle("paddingLeft",0);D.setStyle("paddingRight",0);}this._refreshCloneNode(E);}});B.namespace("Bewype");B.Bewype.LayoutDesignerContent=A;},"@VERSION@",{requires:["async-queue","plugin","substitute","bewype-layout-designer-config","bewype-editor"]});YUI.add("bewype-layout-designer-places",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-places";A.NS="layoutDesignerPlaces";B.extend(A,B.Bewype.LayoutDesignerConfig,{placesNode:null,contents:null,sortable:null,_initSortable:function(){var C=this.get("host"),F=this.get("baseNode"),D=F.one("."+this.get("designerClass")+"-sources"),E=D.layoutDesignerSources.sortable;this.sortable=new B.Sortable({container:C,nodes:"li",opacity:".2"});E.join(this.sortable,"outer");},initializer:function(C){this.setAttrs(C);var F=this.get("host"),E=this.get("designerClass"),D=this.get("placesType"),G="."+E+"-src";this.contents=[];F.removeClass(E+"-src");F.removeClass(E+"-src-"+D);F.addClass(E+"-places");F.addClass(E+"-places-"+D);F.all(G).each(function(I,H){var J=this.getAttrs();J.parentNode=F;I.plug(B.Bewype.LayoutDesignerContent,J);this.contents.push(I);},this);this._initSortable();},destructor:function(){var C=this.get("host"),D=this.get("parentNode");B.Object.each(this.contents,function(F,E){if(F.layoutDesignerPlaces){F.unplug(B.Bewype.LayoutDesignerPlaces);}else{if(F.layoutDesignerContent){F.unplug(B.Bewype.LayoutDesignerContent);}else{}}},this);if(D){D.layoutDesignerPlaces.unRegisterContent(C);}},refresh:function(E){var D=this.get("host"),C=this.get("placesType"),G=this.getPlacesHeight(),I=this.getPlacesWidth(),H=this.get("parentNode"),F=null;
G=G===0?this.get("contentHeight"):G;I=I>E?E:I;I=I===0?this.getAvailablePlace():I;D.setStyle("height",G);D.setStyle("width",I);switch(C){case"vertical":F=I;B.each(this.contents,function(L,K){var J=null;if(L.layoutDesignerPlaces){J=L.layoutDesignerPlaces.get("host");J.setStyle("width",F);if(E){L.layoutDesignerPlaces.refresh(F);}}else{if(E){L.layoutDesignerContent.refresh(F);}}});break;case"horizontal":F=E?(E/this.contents.length):null;B.Object.each(this.contents,function(L,K){var J=null,M=null;if(L.layoutDesignerPlaces){J=L.layoutDesignerPlaces.get("host");if(F){L.layoutDesignerPlaces.refresh(F);}}else{if(L.layoutDesignerContent){J=L.layoutDesignerContent.get("host");if(F){L.layoutDesignerContent.refresh(F);}}}M=J?J.ancestor("li"):null;if(M){M.setStyle("height",G);M.setStyle("vertical-align","top");}},this);break;}return F;},cleanContentOver:function(){B.each(this.contents,function(D,C){if(D.layoutDesignerContent){D.layoutDesignerContent._q.stop();D.layoutDesignerContent.hideClone();}});},getMaxWidth:function(){return B.Bewype.Utils.getWidth(this.get("host"));},hasPlace:function(D){var C=this.getAvailablePlace(),E=this.get("placesType");D=D?D:this.get("contentWidth");return E==="vertical"||C>=D;},hasSubPlaces:function(){var C=false;B.each(this.contents,function(E,D){if(E.layoutDesignerPlaces){C=true;}});return C;},getAvailablePlace:function(){var D=this.get("placesType"),E=this.getMaxWidth(),C=this.getPlacesWidth();if(D==="vertical"){return C===0?E:C;}else{return E-C;}},getPlacesWidth:function(){var C=0,D=this.get("parentNode")||this.get("host");switch(this.get("placesType")){case"vertical":if(!this.get("parentNode")){return B.Bewype.Utils.getWidth(D);}B.each(this.contents,function(F,E){var G=0;if(F.layoutDesignerPlaces){G=F.layoutDesignerPlaces.getPlacesWidth();}else{if(F.layoutDesignerContent){G=F.layoutDesignerContent.getContentWidth();}}if(G>C){C=G;}});break;case"horizontal":B.each(this.contents,function(F,E){if(F.layoutDesignerPlaces){C+=F.layoutDesignerPlaces.getPlacesWidth();}else{if(F.layoutDesignerContent){C+=F.layoutDesignerContent.getContentWidth();}}});break;}return C;},getPlacesHeight:function(){var C=0;switch(this.get("placesType")){case"vertical":B.each(this.contents,function(E,D){if(E.layoutDesignerPlaces){C+=E.layoutDesignerPlaces.getPlacesHeight();}else{if(E.layoutDesignerContent){C+=E.layoutDesignerContent.getContentHeight();}}});break;case"horizontal":B.each(this.contents,function(E,D){var F=0;if(E.layoutDesignerPlaces){F=E.layoutDesignerPlaces.getPlacesHeight();}else{if(E.layoutDesignerContent){F=E.layoutDesignerContent.getContentHeight();}}if(F>C){C=F;}});break;}return C;},registerContent:function(C){this.contents.push(C);},unRegisterContent:function(C){var D=this.contents.indexOf(C);if(D!=-1){this.contents.splice(D,1);}},getContents:function(){var C=[];B.each(this.contents,function(E,D){if(E.layoutDesignerPlaces){C=C.concat(E.layoutDesignerPlaces.getContents());}else{C.push(E);}});return C;},removeContent:function(C,F){var I=C.ancestor("li"),E=this.get("host"),H=this.get("baseNode"),D=this.get("designerClass"),G=H.one("."+D+"-layout ul");this.unRegisterContent(C);C.unplug(B.Bewype.LayoutDesignerContent);I.remove();if(this.contents.length===0&&E!=G){E.unplug(B.Bewype.LayoutDesignerPlaces);}else{if(E.layoutDesignerPlaces){E.layoutDesignerPlaces.refresh();}}}});B.namespace("Bewype");B.Bewype.LayoutDesignerPlaces=A;},"@VERSION@",{requires:["sortable","dd-constrain","bewype-layout-designer-content-text"]});YUI.add("bewype-layout-designer-sources",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-sources";A.NS="layoutDesignerSources";A.TXT_SRC_TEMPLATE='<div class="{designerClass}-src" ';A.TXT_SRC_TEMPLATE+='style="width: 80px; height: 40px">Text</div>';A.IMG_SRC_TEMPLATE='<img class="{designerClass}-src" ';A.IMG_SRC_TEMPLATE+='style="width: 80px; height: 40px" src="{defaultImg}"/>';A.ROW_SRC_TEMPLATE='<table class="{designerClass}-src {designerClass}-src-horizontal"><tr>';A.ROW_SRC_TEMPLATE+="<td><div>"+A.TXT_SRC_TEMPLATE+"</div></td>";A.ROW_SRC_TEMPLATE+="<td><div>"+A.TXT_SRC_TEMPLATE+"</div></td>";A.ROW_SRC_TEMPLATE+="</tr></table>";B.extend(A,B.Bewype.LayoutDesignerConfig,{sortable:null,_addSourceItem:function(F){var D=this.get("host"),G=D.one("ul"),E=new B.Node.create("<li><div /></li>"),C=E.one("div");C.setStyle("position","relative");C.append(F);G.append(E);},addRowSource:function(){var C=new B.Node.create(B.substitute(A.ROW_SRC_TEMPLATE,{designerClass:this.get("designerClass")}));this._addSourceItem(C);},addTextSource:function(){var C=new B.Node.create(B.substitute(A.TXT_SRC_TEMPLATE,{designerClass:this.get("designerClass")}));this._addSourceItem(C);},addImageSource:function(){var C=new B.Node.create(B.substitute(A.IMG_SRC_TEMPLATE,{designerClass:this.get("designerClass"),defaultImg:this.get("defaultImg")}));this._addSourceItem(C);},initializer:function(D){this.setAttrs(D);var G=this.get("host"),F=this.get("sourceGroups"),C=this.get("sourceLabels"),E=new B.Node.create("<ul />");G.append(E);this.addRowSource();this.addTextSource();this.addImageSource();this.sortable=new B.Sortable({container:E,nodes:"li",opacity:".2"});},destructor:function(){},_onDragStart:function(E,C){var D=E.get("node"),F=E.get("dragNode");D.setStyle("opacity",0.2);F.set("innerHTML",D.get("innerHTML"));F.setStyles({backgroundColor:D.getStyle("backgroundColor"),color:D.getStyle("color"),opacity:0.65});},_onDragEnd:function(D,C){D.get("node").setStyle("opacity",1);}});B.namespace("Bewype");B.Bewype.LayoutDesignerSources=A;},"@VERSION@",{requires:["dd","plugin","substitute"]});YUI.add("bewype-layout-designer",function(A){},"@VERSION@",{use:["bewype-layout-designer-config","bewype-layout-designer-base","bewype-layout-designer-content","bewype-layout-designer-places","bewype-layout-designer-sources"]});