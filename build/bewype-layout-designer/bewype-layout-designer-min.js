YUI.add("bewype-layout-designer-config",function(b){var a=function(c){a.superclass.constructor.apply(this,arguments);};a.NAME="layout-designer-config";a.ATTRS={designerClass:{value:"layout-designer",writeOnce:true,validator:function(c){return b.Lang.isString(c);}},sourceHeight:{value:40,validator:function(c){return b.Lang.isNumber(c);}},sourceWidth:{value:140,validator:function(c){return b.Lang.isNumber(c);}},sourceGroups:{value:["horizontal","vertical","text","image"],writeOnce:true},sourceLabels:{value:["Layout Horizontal","Layout Vertical","Text","Image"],writeOnce:true},targetOverHeight:{value:20,validator:function(c){return b.Lang.isNumber(c);}},targetMinHeight:{value:8,validator:function(c){return b.Lang.isNumber(c);}},targetOverWidth:{value:20,validator:function(c){return b.Lang.isNumber(c);}},targetMinWidth:{value:8,validator:function(c){return b.Lang.isNumber(c);}},targetZIndex:{value:1,validator:function(c){return b.Lang.isNumber(c);}},contentHeight:{value:40,validator:function(c){return b.Lang.isNumber(c);}},contentWidth:{value:40,validator:function(c){return b.Lang.isNumber(c);}},contentZIndex:{value:1,validator:function(c){return b.Lang.isNumber(c);}},defaultContent:{value:"Text..",validator:function(c){return b.Lang.isString(c);}},baseNode:{value:null,writeOnce:true},parentNode:{value:null},layoutWidth:{value:600,validator:function(c){return b.Lang.isNumber(c);}},placesType:{value:"vertical",writeOnce:true,validator:function(c){return b.Lang.isString(c);}},contentType:{value:"text",writeOnce:true,validator:function(c){return b.Lang.isString(c);}},defaultText:{value:"Text ...",writeOnce:true,validator:function(c){return b.Lang.isString(c);}},defaultImg:{value:b.config.base+"bewype-layout-designer/assets/blank.png",writeOnce:true,validator:function(c){return b.Lang.isString(c);}},editorTextButtons:{value:["height","width","bold","italic","underline","title","font-family","font-size","text-align","color","background-color","url","reset","apply"]},editorImageButtons:{value:["file","background-color","height","width","padding-top","padding-right","padding-bottom","padding-left","reset","apply"]},startingTargetType:{value:"vertical",writeOnce:true,validator:function(c){return b.Lang.isString(c);}}};b.extend(a,b.Plugin.Base);b.namespace("Bewype");b.Bewype.LayoutDesignerConfig=a;},"@VERSION@",{requires:["plugin"]});YUI.add("bewype-layout-designer-base",function(a){var b=function(c){b.superclass.constructor.apply(this,arguments);};b.NODE_SRC_TEMPLATE='<div class="{designerClass}-sources"></div>';b.NODE_PAN_TEMPLATE='<div class="{designerClass}-edit-panel"></div>';b.NODE_LAYOUT_TEMPLATE='<div class="{designerClass}-layout {designerClass}-places"></div>';b.NAME="layout-designer";b.NS="layoutDesigner";a.extend(b,a.Bewype.LayoutDesignerConfig,{nodeLayout:null,initializer:function(c){this.setAttrs(c);var e=this.get("host"),g=null,f=null,d=this.get("designerClass"),h=this.get("layoutWidth");g=new a.Node.create(a.substitute(b.NODE_SRC_TEMPLATE,{designerClass:d}));e.append(g);g.plug(a.Bewype.LayoutDesignerSources,c);f=new a.Node.create(a.substitute(b.NODE_PAN_TEMPLATE,{designerClass:d}));e.append(f);this.nodeLayout=new a.Node.create(a.substitute(b.NODE_LAYOUT_TEMPLATE,{designerClass:d}));e.append(this.nodeLayout);this.nodeLayout.setStyle("width",h);c.baseNode=e;c.targetType=this.get("startingTargetType");this.nodeLayout.plug(a.Bewype.LayoutDesignerPlaces,c);this.nodeLayout.plug(a.Bewype.LayoutDesignerTarget,c);this.nodeLayout.layoutDesignerTarget.refresh();a.DD.DDM.on("drop:hit",a.bind(this._dropHitGotcha,this));},destructor:function(){var e=this.get("host"),d=this.get("designerClass"),f=e.one("."+d+"-sources"),c=e.one("."+d+"-edit-panel"),g=this.nodeLayout.one("table")||this.nodeLayout.one("ul");f.remove();c.remove();this.nodeLayout.unplug(a.Bewype.LayoutDesignerTarget);if(g){this.nodeLayout.replace(g);}else{this.nodeLayout.remove();}},_dropHitGotcha:function(l){var d=l.drag.get("node"),n=d.get("tagName").toLowerCase(),h="."+this.get("designerClass")+"-places",m="."+this.get("designerClass")+"-container",j=d.one(m),g=d.one(h)?j:d.one(m),e=null,f=n==="li"?"ul":"table",i=j?j.ancestor(f):null,k=i?i.ancestor("div"):null,c=null;if(!g||!k.layoutDesignerPlaces){return;}else{if(g.layoutDesignerContent){e=g.layoutDesignerContent.get("parentNode");}else{if(g.layoutDesignerPlaces){e=g.layoutDesignerPlaces.get("parentNode");}else{return;}}}if(e!=k){e.layoutDesignerPlaces.unRegisterContent(g);k.layoutDesignerPlaces.registerContent(g);g.layoutDesignerContent.set("parentNode",k);c=k.layoutDesignerPlaces.getMaxWidth();k.layoutDesignerTarget.refresh(c);}},getContents:function(){if(this.nodeLayout.layoutDesignerPlaces){return this.nodeLayout.layoutDesignerPlaces.getContents();}else{return[];}}});a.namespace("Bewype");a.Bewype.LayoutDesigner=b;},"@VERSION@",{requires:["bewype-layout-designer-sources","bewype-layout-designer-target"]});YUI.add("bewype-layout-designer-content",function(b){var a=function(c){a.superclass.constructor.apply(this,arguments);};a.C_TEXT_TEMPLATE='<div class="{designerClass}-content ';a.C_TEXT_TEMPLATE+='{designerClass}-content-{contentType}">';a.C_TEXT_TEMPLATE+="{defaultContent}</div>";a.C_IMG_TEMPLATE='<img class="{designerClass}-content ';a.C_IMG_TEMPLATE+='{designerClass}-content-{contentType}" ';a.C_IMG_TEMPLATE+='src="{defaultContent}" />';a.NAME="layout-designer-content";a.NS="layoutDesignerContent";b.extend(a,b.Bewype.LayoutDesignerConfig,{editing:false,initializer:function(c){this.setAttrs(c);var e=this.get("host"),i=this.get("parentNode"),g=this.get("contentType"),d=this.get("designerClass"),h=null,f=g==="text"?a.C_TEXT_TEMPLATE:a.C_IMG_TEMPLATE;h=new b.Node.create(b.substitute(f,{designerClass:d,contentType:g,defaultContent:g==="text"?this.get("defaultText"):this.get("defaultImg")}));e.append(h);h.setStyle("height",this.get("contentHeight"));h.setStyle("width",this.get("contentWidth"));i.layoutDesignerPlaces.registerContent(e);this._addCloneNode();},destructor:function(){var e=this.get("host"),h=this.get("parentNode"),d=this.get("designerClass")+"-content",f=this.get("contentType")==="image"?"img.":"div.",g=e.one(f+d),c=e.one("div."+d+"-clone");
if(this.editing===true){this._detachEditor();}h.layoutDesignerPlaces.unRegisterContent(e);e.detachAll("mouseenter");if(c){c.one("."+d+"-clone-edit").detachAll("click");c.one("."+d+"-clone-remove").detachAll("click");c.remove();}e.replace(g);},_detachEditor:function(){var j=this.get("host"),c=this.get("baseNode"),i=this.get("designerClass")+"-sources",h=this.get("designerClass")+"-edit-panel",k=c.one("div."+i),g=c.one("div."+h),e=this.get("contentType")==="image"?b.Bewype.EditorTag:b.Bewype.EditorText,f=this.getContentNode(),d=this.getCloneNode();this.editing=false;if(g&&g.bewypeEditorPanel){g.unplug(b.Bewype.EditorPanel);f.unplug(e);j.detachAll("bewype-editor:onClose");j.detachAll("bewype-editor:onChange");this.refresh();}if(g){g.setStyle("display","none");}if(k){k.setStyle("display","block");d.setStyle("display","block");}this._refreshCloneNode();return true;},_attachEditor:function(){var o=this.get("host"),g=this.get("baseNode"),d=this.get("parentNode"),n=this.get("designerClass")+"-sources",m=this.get("designerClass")+"-edit-panel",s=g.one("div."+n),l=g.one("div."+m),r=d.layoutDesignerPlaces,f=r.get("placesType"),j=this.get("contentType")==="image"?b.Bewype.EditorTag:b.Bewype.EditorText,e=this.get("contentType")==="image"?"editorImageButtons":"editorTextButtons",k=this.getContentNode(),i=this.getCloneNode(),h=null,q=null,p=(f==="vertical")?r.get("parentNode"):null,c=p?p.layoutDesignerPlaces:null;i.setStyle("display","none");s.setStyle("display","none");l.setStyle("display","block");if(f==="vertical"){q=d.layoutDesignerPlaces.getMaxWidth();q+=c?c.getAvailablePlace():0;}else{q=d.layoutDesignerPlaces.getAvailablePlace();q+=this.getContentWidth();}h={panelNode:l,spinnerMaxWidth:q,activeButtons:this.get(e)};k.plug(j,h);b.on("bewype-editor:onClose",b.bind(this._detachEditor,this),k);b.on("bewype-editor:onChange",b.bind(this.refresh,this),k);this.editing=true;},_onClickEdit:function(c){var d=this.get("parentNode");b.each(d.layoutDesignerPlaces.getContents(),function(f,e){f.layoutDesignerContent._detachEditor();});this._attachEditor();},_onClickRemove:function(c){var d=this.get("host"),e=this.get("parentNode");e.layoutDesignerPlaces.removeContent(d);},_addCloneNode:function(){var f=this.get("host"),e=this.get("designerClass")+"-content",c=new b.Node.create('<div class="'+e+'-clone-callbacks" />'),d=null,i=null,g=null,h=null;d=f.cloneNode(false);d.set("innerHTML","");d.set("className",e+"-clone");f.append(d);d.setStyle("z-index",this.get("contentZIndex"));d.setStyle("position","absolute");d.setStyle("bottom",0);d.append(c);i=new b.Node.create('<div class="'+e+'-clone-drag" />');c.append(i);g=new b.Node.create('<div class="'+e+'-clone-edit" />');c.append(g);b.on("click",b.bind(this._onClickEdit,this),g);h=new b.Node.create('<div class="'+e+'-clone-remove" />');c.append(h);b.on("click",b.bind(this._onClickRemove,this),h);this._refreshCloneNode();},getContentHeight:function(){var f=this.getContentNode(),c=b.Bewype.Utils.getHeight(f),e=b.Bewype.Utils.getStyleValue(f,"paddingTop")||0,d=b.Bewype.Utils.getStyleValue(f,"paddingBottom")||0;return c+e+d;},getContentWidth:function(){var f=this.getContentNode(),e=b.Bewype.Utils.getWidth(f),d=b.Bewype.Utils.getStyleValue(f,"paddingRight")||0,c=b.Bewype.Utils.getStyleValue(f,"paddingLeft")||0;return e+c+d;},getContentNode:function(){var d=this.get("host"),c=this.get("designerClass")+"-content",e=this.get("contentType")==="image"?"img.":"div.";return d.one(e+c);},getCloneNode:function(){var d=this.get("host"),c=this.get("designerClass")+"-content",e="div."+c+"-clone";return d.one(e);},_refreshCloneNode:function(e){var d=this.getCloneNode(),f=this.getContentHeight(),c=e||this.getContentWidth();if(d){d.setStyle("height",f-2);d.setStyle("width",c-2);}},refresh:function(c){var e=this.get("parentNode"),d=c?this.getContentNode():null;if(d){d.setStyle("width",c);d.setStyle("paddingLeft",0);d.setStyle("paddingRight",0);}this._refreshCloneNode(c);e.layoutDesignerTarget.refresh();}});b.namespace("Bewype");b.Bewype.LayoutDesignerContent=a;},"@VERSION@",{requires:["async-queue","plugin","substitute","bewype-editor"]});YUI.add("bewype-layout-designer-places",function(b){var a=function(c){a.superclass.constructor.apply(this,arguments);};a.NAME="layout-designer-places";a.NS="layoutDesignerPlaces";a.H_PLACES_TEMPLATE='<table class="{designerClass}-places {designerClass}-places-horizontal">';a.H_PLACES_TEMPLATE+="<tr />";a.H_PLACES_TEMPLATE+="</table>";a.V_PLACES_TEMPLATE='<ul class="{designerClass}-places {designerClass}-places-vertical"></ul>';a.H_DEST_TEMPLATE='<td class="{designerClass}-cell {designerClass}-cell-horizontal">';a.H_DEST_TEMPLATE+='<div class="{designerClass}-container"></div>';a.H_DEST_TEMPLATE+="</td>";a.V_DEST_TEMPLATE='<li class="{designerClass}-cell {designerClass}-cell-vertical">';a.V_DEST_TEMPLATE+='<div class="{designerClass}-container"></div>';a.V_DEST_TEMPLATE+="</li>";b.extend(a,b.Bewype.LayoutDesignerConfig,{placesNode:null,contents:null,sortable:null,initializer:function(d){this.setAttrs(d);var f=this.get("host"),e=this.get("placesType"),c=a.H_PLACES_TEMPLATE,h=a.V_PLACES_TEMPLATE,i=(e==="horizontal")?c:h,g=this.get("parentNode");this.placesNode=new b.Node.create(b.substitute(i,{designerClass:this.get("designerClass")}));f.append(this.placesNode);this.placesNode.setStyle("height",this.get("contentHeight"));this.placesNode.setStyle("width",this.get("contentWidth"));this._initSortable();if(g){g.layoutDesignerPlaces.registerContent(f);}this.contents=[];},_initSortable:function(){var c=this.get("placesType"),d=(c==="horizontal")?"td":"li";if(this.sortable){this.sortable.destroy();}this.sortable=new b.Sortable({container:this.placesNode,nodes:d,opacity:".2"});},destructor:function(){var c=this.get("host"),d=this.get("parentNode");b.Object.each(this.contents,function(f,e){if(f.layoutDesignerPlaces){f.unplug(b.Bewype.LayoutDesignerPlaces);}else{if(f.layoutDesignerContent){var g=f.layoutDesignerContent.get("contentType");f.unplug(b.Bewype.LayoutDesignerContent);
}else{}}},this);if(d){d.layoutDesignerPlaces.unRegisterContent(c);}},hasSubPlaces:function(){var c=false;b.each(this.contents,function(e,d){if(e.layoutDesignerPlaces){c=true;}});return c;},getMaxWidth:function(){return b.Bewype.Utils.getWidth(this.get("host"));},getAvailablePlace:function(){var d=this.get("placesType"),e=this.getMaxWidth(),c=this.getPlacesWidth();if(d==="vertical"){return c===0?e:c;}else{return e-c;}},hasPlace:function(d){var c=this.getAvailablePlace(),e=this.get("placesType");d=d?d:this.get("contentWidth");return e==="vertical"||c>=d;},getPlacesWidth:function(){var c=0,d=this.get("parentNode")||this.placesNode.ancestor("div");switch(this.get("placesType")){case"vertical":if(!this.get("parentNode")){return b.Bewype.Utils.getWidth(d);}b.each(this.contents,function(f,e){var g=0;if(f.layoutDesignerPlaces){g=f.layoutDesignerPlaces.getPlacesWidth();}else{g=f.layoutDesignerContent.getContentWidth();}if(g>c){c=g;}});break;case"horizontal":b.each(this.contents,function(f,e){if(f.layoutDesignerPlaces){c+=f.layoutDesignerPlaces.getPlacesWidth();}else{c+=f.layoutDesignerContent.getContentWidth();}});break;}return c;},getPlacesHeight:function(){var c=0;switch(this.get("placesType")){case"vertical":b.each(this.contents,function(e,d){if(e.layoutDesignerPlaces){c+=e.layoutDesignerPlaces.getPlacesHeight();}else{c+=e.layoutDesignerContent.getContentHeight();}});break;case"horizontal":b.each(this.contents,function(e,d){var f=0;if(e.layoutDesignerPlaces){f=e.layoutDesignerPlaces.getPlacesHeight();}else{f=e.layoutDesignerContent.getContentHeight();}if(f>c){c=f;}});c=(c===0)?this.get("contentHeight"):c;break;}return c;},refresh:function(d){var c=this.get("placesType"),e=this.getPlacesHeight(),g=d?d:this.getPlacesWidth(),f=this.get("parentNode");e=e===0?this.get("contentHeight"):e;g=g===0?this.getAvailablePlace():g;this.placesNode.setStyle("height",e);this.placesNode.setStyle("width",g);switch(c){case"vertical":b.each(this.contents,function(j,i){var h=null;if(j.layoutDesignerPlaces){h=j.layoutDesignerPlaces.placesNode;h.setStyle("width",g);if(d){j.layoutDesignerTarget.refresh(d);}}else{if(d){j.layoutDesignerContent.refresh(d);}}});break;case"horizontal":b.Object.each(this.contents,function(j,i){var h=null,m=d?(d/this.contents.length):null,l=null;if(j.layoutDesignerPlaces){h=j.layoutDesignerPlaces.placesNode;if(m){j.layoutDesignerTarget.refresh(m);}}else{if(j.layoutDesignerContent){h=j.layoutDesignerContent.get("host");if(m){j.layoutDesignerContent.refresh(m);}}}l=h?h.ancestor("td"):null;if(l){l.setStyle("height",e);l.setStyle("vertical-align","top");}},this);break;}if(!f){this.placesNode.ancestor("div").setStyle("height",e);}return[e,g];},cleanContentOver:function(){b.each(this.contents,function(d,c){if(d.layoutDesignerContent){d.layoutDesignerContent._q.stop();d.layoutDesignerContent.hideClone();}});},addDestNode:function(){var c=null;switch(this.get("placesType")){case"horizontal":c=new b.Node.create(b.substitute(a.H_DEST_TEMPLATE,{designerClass:this.get("designerClass")}));this.placesNode.one("tr").append(c);break;case"vertical":c=new b.Node.create(b.substitute(a.V_DEST_TEMPLATE,{designerClass:this.get("designerClass")}));this.placesNode.append(c);break;}return c.one("div");},registerContent:function(c){this.contents.push(c);},unRegisterContent:function(c){var d=this.contents.indexOf(c);if(d!=-1){this.contents.splice(d,1);}},addContent:function(h){var d=this.get("placesType"),g=this.addDestNode(),c=null,f=this.getAttrs(),e=this.getMaxWidth();f.contentType=h;f.parentNode=this.get("host");f.contentWidth=d==="vertical"?e:this.getAvailablePlace();g.plug(b.Bewype.LayoutDesignerContent,f);return e;},removeContent:function(c,f){var g=null,d=this.get("host"),e=c.layoutDesignerContent.get("contentType");switch(this.get("placesType")){case"horizontal":g=c.ancestor("td");break;case"vertical":g=c.ancestor("li");break;}this.unRegisterContent(c);c.unplug(b.Bewype.LayoutDesignerContent);g.remove(true);if(d.layoutDesignerTarget){d.layoutDesignerTarget.refresh();}},getContents:function(){var c=[];b.each(this.contents,function(e,d){if(e.layoutDesignerPlaces){c=c.concat(e.layoutDesignerPlaces.getContents());}else{c.push(e);}});return c;}});b.namespace("Bewype");b.Bewype.LayoutDesignerPlaces=a;},"@VERSION@",{requires:["sortable","dd-constrain","bewype-layout-designer-content"]});YUI.add("bewype-layout-designer-sources",function(b){var a=function(c){a.superclass.constructor.apply(this,arguments);};a.NAME="layout-designer-sources";a.NS="layoutDesignerSources";a.ITEM_SRC_TEMPLATE='<div class="{designerClass}-src {designerClass}-src-{itemType}">{itemLabel}</div>';b.extend(a,b.Bewype.LayoutDesignerConfig,{initializer:function(e){this.setAttrs(e);var g=this.get("host"),f=this.get("sourceGroups"),d=this.get("sourceLabels"),c=new b.Node.create("<table><tr /></table>");g.append(c);b.Object.each(f,function(j,i){var h=null,m=null,l=null;h=new b.Node.create(b.substitute(a.ITEM_SRC_TEMPLATE,{itemType:j,designerClass:this.get("designerClass"),itemLabel:d[i]}));m=new b.Node.create("<td />");m.append(h);c.append(m);h.setStyle("height",this.get("sourceHeight"));h.setStyle("width",this.get("sourceWidth"));l=new b.DD.Drag({node:h,groups:[j],dragMode:"point"});l.plug(b.Plugin.DDProxy,{moveOnEnd:false});l.plug(b.Plugin.DDConstrained,{constrain2node:[g,g.next()]});l.on("drag:start",b.bind(this._onDragStart,this,l));l.on("drag:end",b.bind(this._onDragEnd,this,l));},this);},destructor:function(){},_onDragStart:function(e,c){var d=e.get("node"),f=e.get("dragNode");d.setStyle("opacity",0.2);f.set("innerHTML",d.get("innerHTML"));f.setStyles({backgroundColor:d.getStyle("backgroundColor"),color:d.getStyle("color"),opacity:0.65});},_onDragEnd:function(d,c){d.get("node").setStyle("opacity",1);}});b.namespace("Bewype");b.Bewype.LayoutDesignerSources=a;},"@VERSION@",{requires:["dd","plugin","substitute"]});YUI.add("bewype-layout-designer-target",function(b){var a=function(c){a.superclass.constructor.apply(this,arguments);};a.NAME="layout-designer-target";
a.NS="layoutDesignerTarget";b.extend(a,b.Bewype.LayoutDesignerConfig,{_targetNode:null,_dd:null,_groups:["horizontal","vertical","text","image"],initializer:function(d){this.setAttrs(d);var h=this.get("host"),f=this.get("targetType"),g=this.get("designerClass")+"-target",c=this.get("layoutWidth"),j=this.get("contentHeight"),i=this.get("contentWidth"),k=this.get("targetMinHeight"),l=this.get("targetMinWidth"),e=null;this._targetNode=new b.Node.create('<div class="'+g+" "+g+"-"+f+'" />');h.append(this._targetNode);if(f==="vertical"||f==="start"){e=h.ancestor("table")?i:c;this._targetNode.setStyle("height",k);this._targetNode.setStyle("width",e);}else{if(f==="horizontal"){this._targetNode.setStyle("height",j);this._targetNode.setStyle("width",l);}else{return;}}this._targetNode.setStyle("z-index",this.get("targetZIndex"));this._dd=new b.DD.Drop({node:this._targetNode,groups:this._groups,target:true,after:{"drop:enter":b.bind(this._onDropEnter,this),"drop:hit":b.bind(this._onDropHit,this),"drop:exit":b.bind(this._afterDropExit,this)}});if(f!="start"){b.on("mouseenter",b.bind(this._onMouseEnter,this),this._targetNode);b.on("mouseleave",b.bind(this._onMouseLeave,this),this._targetNode);}},destructor:function(){var c=this.get("host"),d=this._targetNode.one("div");this._dd.detachAll("drop:enter");this._dd.detachAll("drop:hit");this._dd.detachAll("drop:exit");if(d){d.detachAll("click");}this._targetNode.detachAll("mouseenter");this._targetNode.detachAll("mouseleave");this._targetNode.remove();c.unplug(b.Bewype.LayoutDesignerPlaces);},_onDropEnter:function(c){switch(this.get("targetType")){case"start":case"vertical":this._targetNode.setStyle("height",this.get("contentHeight"));break;case"horizontal":this._targetNode.setStyle("width",this.get("contentWidth"));break;}this.refresh();},_afterDropExit:function(c,d){switch(this.get("targetType")){case"start":case"vertical":this._targetNode.setStyle("height",this.get("targetMinHeight"));break;case"horizontal":this._targetNode.setStyle("width",this.get("targetMinWidth"));break;}this.refresh(d);},_onClickRemove:function(c){var e=this.get("host"),f=this.get("parentNode"),d=e.layoutDesignerPlaces.get("placesType");switch(d){case"horizontal":e.one("table").remove();break;case"vertical":e.one("ul").remove();break;}e.unplug(b.Bewype.LayoutDesignerTarget);e.unplug(b.Bewype.LayoutDesignerPlaces);if(f&&f.layoutDesignerTarget){e.remove(true);f.layoutDesignerTarget.refresh();}else{e.setStyle("height",this.get("targetMinHeight"));this._addTarget(e,"start");}},_onMouseEnter:function(c){var e=this.get("targetType"),d=this.get("designerClass")+"-target",f=this._targetNode.one("div");switch(e){case"start":case"vertical":this._targetNode.setStyle("height",this.get("targetOverHeight"));break;case"horizontal":this._targetNode.setStyle("width",this.get("targetOverWidth"));break;}if(f){f.setStyle("display","block");}else{f=new b.Node.create('<div class="'+d+"-remove "+d+"-"+e+'-remove" />');this._targetNode.append(f);b.on("click",b.bind(this._onClickRemove,this),f);}this.refresh();},_onMouseLeave:function(c){var d=this._targetNode.one("div");d.setStyle("display","none");this._afterDropExit(c);},_addPlaces:function(g,e){var d=this.get("host"),c=this.get("targetType"),f=this.getAttrs();f.placesType=e;f.parentNode=(c==="start"||e==="start")?null:d;g.plug(b.Bewype.LayoutDesignerPlaces,f);},_addTarget:function(g,e){var d=this.get("host"),c=this.get("targetType"),f=this.getAttrs();f.targetType=e;f.parentNode=(c==="start"||e==="start")?null:d;g.plug(b.Bewype.LayoutDesignerTarget,f);},_getHitType:function(c){var d=c.drag;if(d._groups.vertical){return"vertical";}else{if(d._groups.horizontal){return"horizontal";}else{if(d._groups.text){return"text";}else{if(d._groups.image){return"image";}else{return null;}}}}},_onDropHit:function(c){var e=this.get("host"),d=this.get("targetType"),f=this._getHitType(c),i=null,h=e.layoutDesignerPlaces,g=null;if(d==="start"){if(f==="text"||f==="image"){return this._afterDropExit(c);}e.unplug(b.Bewype.LayoutDesignerTarget);if(e.layoutDesignerPlaces){e.unplug(b.Bewype.LayoutDesignerPlaces);}}if(f===d){return;}else{if(f==="start"||f==="horizontal"||f==="vertical"){if(h&&h.get("placesType")!=="vertical"){g=h.getMaxWidth();}i=d==="start"?e:h.addDestNode();this._addPlaces(i,f);this._addTarget(i,f);if(f!=="start"){i.layoutDesignerTarget.refresh();}}else{g=h.addContent(f);}}this._afterDropExit(c,g);},refresh:function(g){var h=this.get("host"),e=this.get("targetType"),i=this.get("parentNode")||h,l=null,k=null,j=null,f=null,c=null,d=null;if(h.layoutDesignerPlaces){l=h.layoutDesignerPlaces.refresh(g);}else{return;}k=l[0];j=l[1];f=b.Bewype.Utils.getHeight(this._targetNode);c=b.Bewype.Utils.getWidth(this._targetNode);d=this._targetNode.ancestor("div");switch(e){case"vertical":k=b.Bewype.Utils.getHeight(i);if(i==h){this._targetNode.setY(i.getY()+k-f);}else{this._targetNode.setStyle("position","absolute");this._targetNode.setStyle("bottom",0);}this._targetNode.setStyle("width",j);break;case"horizontal":j=b.Bewype.Utils.getWidth(i);this._targetNode.setX(i.getX()+j-c);if(i==h){this._targetNode.setY(i.getY());}else{this._targetNode.setStyle("position","absolute");this._targetNode.setStyle("bottom",0);}this._targetNode.setStyle("height",k);break;default:return;}if(i.layoutDesignerTarget&&i!=h&&!g){i.layoutDesignerTarget.refresh();}}});b.namespace("Bewype");b.Bewype.LayoutDesignerTarget=a;},"@VERSION@",{requires:["bewype-layout-designer-places"]});YUI.add("bewype-layout-designer",function(a){},"@VERSION@",{use:["bewype-layout-designer-config","bewype-layout-designer-base","bewype-layout-designer-content","bewype-layout-designer-places","bewype-layout-designer-sources","bewype-layout-designer-target"]});