YUI.add("bewype-layout-designer-config",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-config";A.ATTRS={designerClass:{value:"layout-designer",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},sourceHeight:{value:40,validator:function(C){return B.Lang.isNumber(C);}},sourceWidth:{value:140,validator:function(C){return B.Lang.isNumber(C);}},sourceGroups:{value:["horizontal","vertical","text","image"],writeOnce:true},sourceLabels:{value:["Layout Horizontal","Layout Vertical","Text","Image"],writeOnce:true},targetOverHeight:{value:20,validator:function(C){return B.Lang.isNumber(C);}},targetMinHeight:{value:8,validator:function(C){return B.Lang.isNumber(C);}},targetOverWidth:{value:20,validator:function(C){return B.Lang.isNumber(C);}},targetMinWidth:{value:8,validator:function(C){return B.Lang.isNumber(C);}},targetZIndex:{value:1,validator:function(C){return B.Lang.isNumber(C);}},contentHeight:{value:40,validator:function(C){return B.Lang.isNumber(C);}},contentWidth:{value:40,validator:function(C){return B.Lang.isNumber(C);}},contentZIndex:{value:1,validator:function(C){return B.Lang.isNumber(C);}},defaultContent:{value:"Text..",validator:function(C){return B.Lang.isString(C);}},baseNode:{value:null,writeOnce:true},parentNode:{value:null},layoutWidth:{value:600,validator:function(C){return B.Lang.isNumber(C);}},placesType:{value:"vertical",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},contentType:{value:"text",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},defaultText:{value:"Text ...",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},defaultImg:{value:B.config.base+"bewype-layout-designer/assets/blank.png",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},editorTextButtons:{value:["height","width","bold","italic","underline","title","font-family","font-size","text-align","color","background-color","url","reset","apply"]},editorImageButtons:{value:["file","background-color","height","width","padding-top","padding-right","padding-bottom","padding-left","reset","apply"]},startingTargetType:{value:"vertical",writeOnce:true,validator:function(C){return B.Lang.isString(C);}}};B.extend(A,B.Plugin.Base);B.namespace("Bewype");B.Bewype.LayoutDesignerConfig=A;},"@VERSION@",{requires:["plugin"]});YUI.add("bewype-layout-designer-base",function(A){var B=function(C){B.superclass.constructor.apply(this,arguments);};B.NODE_SRC_TEMPLATE='<div class="{designerClass}-sources"></div>';B.NODE_PAN_TEMPLATE='<div class="{designerClass}-edit-panel"></div>';B.NODE_LAYOUT_TEMPLATE='<div class="{designerClass}-layout {designerClass}-places"></div>';B.NAME="layout-designer";B.NS="layoutDesigner";A.extend(B,A.Bewype.LayoutDesignerConfig,{nodeLayout:null,initializer:function(C){this.setAttrs(C);var E=this.get("host"),G=null,F=null,D=this.get("designerClass"),H=this.get("layoutWidth");G=new A.Node.create(A.substitute(B.NODE_SRC_TEMPLATE,{designerClass:D}));E.append(G);G.plug(A.Bewype.LayoutDesignerSources,C);F=new A.Node.create(A.substitute(B.NODE_PAN_TEMPLATE,{designerClass:D}));E.append(F);this.nodeLayout=new A.Node.create(A.substitute(B.NODE_LAYOUT_TEMPLATE,{designerClass:D}));E.append(this.nodeLayout);this.nodeLayout.setStyle("width",H);C.baseNode=E;C.targetType=this.get("startingTargetType");this.nodeLayout.plug(A.Bewype.LayoutDesignerPlaces,C);this.nodeLayout.plug(A.Bewype.LayoutDesignerTarget,C);this.nodeLayout.layoutDesignerTarget.refresh();A.DD.DDM.on("drop:hit",A.bind(this._dropHitGotcha,this));},destructor:function(){var E=this.get("host"),D=this.get("designerClass"),F=E.one("."+D+"-sources"),C=E.one("."+D+"-edit-panel"),G=this.nodeLayout.one("table")||this.nodeLayout.one("ul");F.remove();C.remove();this.nodeLayout.unplug(A.Bewype.LayoutDesignerTarget);if(G){this.nodeLayout.replace(G);}else{this.nodeLayout.remove();}},_dropHitGotcha:function(L){var D=L.drag.get("node"),N=D.get("tagName").toLowerCase(),H="."+this.get("designerClass")+"-places",M="."+this.get("designerClass")+"-container",J=D.one(M),G=D.one(H)?J:D.one(M),E=null,F=N==="li"?"ul":"table",I=J?J.ancestor(F):null,K=I?I.ancestor("div"):null,C=null;if(!G||!K.layoutDesignerPlaces){return;}else{if(G.layoutDesignerContent){E=G.layoutDesignerContent.get("parentNode");}else{if(G.layoutDesignerPlaces){E=G.layoutDesignerPlaces.get("parentNode");}else{return;}}}if(E!=K){E.layoutDesignerPlaces.unRegisterContent(G);K.layoutDesignerPlaces.registerContent(G);G.layoutDesignerContent.set("parentNode",K);C=K.layoutDesignerPlaces.getMaxWidth();K.layoutDesignerTarget.refresh(C);}},getContents:function(){if(this.nodeLayout.layoutDesignerPlaces){return this.nodeLayout.layoutDesignerPlaces.getContents();}else{return[];}}});A.namespace("Bewype");A.Bewype.LayoutDesigner=B;},"@VERSION@",{requires:["bewype-layout-designer-sources","bewype-layout-designer-target"]});YUI.add("bewype-layout-designer-content",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.C_TEXT_TEMPLATE='<div class="{designerClass}-content ';A.C_TEXT_TEMPLATE+='{designerClass}-content-{contentType}">';A.C_TEXT_TEMPLATE+="{defaultContent}</div>";A.C_IMG_TEMPLATE='<img class="{designerClass}-content ';A.C_IMG_TEMPLATE+='{designerClass}-content-{contentType}" ';A.C_IMG_TEMPLATE+='src="{defaultContent}" />';A.NAME="layout-designer-content";A.NS="layoutDesignerContent";B.extend(A,B.Bewype.LayoutDesignerConfig,{editing:false,initializer:function(C){this.setAttrs(C);var E=this.get("host"),I=this.get("parentNode"),G=this.get("contentType"),D=this.get("designerClass"),H=null,F=G==="text"?A.C_TEXT_TEMPLATE:A.C_IMG_TEMPLATE;H=new B.Node.create(B.substitute(F,{designerClass:D,contentType:G,defaultContent:G==="text"?this.get("defaultText"):this.get("defaultImg")}));E.append(H);H.setStyle("height",this.get("contentHeight"));H.setStyle("width",this.get("contentWidth"));I.layoutDesignerPlaces.registerContent(E);this._addCloneNode();},destructor:function(){var E=this.get("host"),H=this.get("parentNode"),D=this.get("designerClass")+"-content",F=this.get("contentType")==="image"?"img.":"div.",G=E.one(F+D),C=E.one("div."+D+"-clone");
if(this.editing===true){this._detachEditor();}H.layoutDesignerPlaces.unRegisterContent(E);E.detachAll("mouseenter");if(C){C.one("."+D+"-clone-edit").detachAll("click");C.one("."+D+"-clone-remove").detachAll("click");C.remove();}E.replace(G);},_detachEditor:function(){var J=this.get("host"),C=this.get("baseNode"),I=this.get("designerClass")+"-sources",H=this.get("designerClass")+"-edit-panel",K=C.one("div."+I),G=C.one("div."+H),E=this.get("contentType")==="image"?B.Bewype.EditorTag:B.Bewype.EditorText,F=this.getContentNode(),D=this.getCloneNode();this.editing=false;if(G&&G.bewypeEditorPanel){G.unplug(B.Bewype.EditorPanel);F.unplug(E);J.detachAll("bewype-editor:onClose");J.detachAll("bewype-editor:onChange");this.refresh();}if(G){G.setStyle("display","none");}if(K){K.setStyle("display","block");D.setStyle("display","block");}this._refreshCloneNode();return true;},_attachEditor:function(){var O=this.get("host"),G=this.get("baseNode"),D=this.get("parentNode"),N=this.get("designerClass")+"-sources",M=this.get("designerClass")+"-edit-panel",S=G.one("div."+N),L=G.one("div."+M),R=D.layoutDesignerPlaces,F=R.get("placesType"),J=this.get("contentType")==="image"?B.Bewype.EditorTag:B.Bewype.EditorText,E=this.get("contentType")==="image"?"editorImageButtons":"editorTextButtons",K=this.getContentNode(),I=this.getCloneNode(),H=null,Q=null,P=(F==="vertical")?R.get("parentNode"):null,C=P?P.layoutDesignerPlaces:null;I.setStyle("display","none");S.setStyle("display","none");L.setStyle("display","block");if(F==="vertical"){Q=D.layoutDesignerPlaces.getMaxWidth();Q+=C?C.getAvailablePlace():0;}else{Q=D.layoutDesignerPlaces.getAvailablePlace();Q+=this.getContentWidth();}H={panelNode:L,spinnerMaxWidth:Q,activeButtons:this.get(E)};K.plug(J,H);B.on("bewype-editor:onClose",B.bind(this._detachEditor,this),K);B.on("bewype-editor:onChange",B.bind(this.refresh,this),K);this.editing=true;},_onClickEdit:function(C){var D=this.get("parentNode");B.each(D.layoutDesignerPlaces.getContents(),function(F,E){F.layoutDesignerContent._detachEditor();});this._attachEditor();},_onClickRemove:function(C){var D=this.get("host"),E=this.get("parentNode");E.layoutDesignerPlaces.removeContent(D);},_addCloneNode:function(){var F=this.get("host"),E=this.get("designerClass")+"-content",C=new B.Node.create('<div class="'+E+'-clone-callbacks" />'),D=null,I=null,G=null,H=null;D=F.cloneNode(false);D.set("innerHTML","");D.set("className",E+"-clone");F.append(D);D.setStyle("z-index",this.get("contentZIndex"));D.setStyle("position","absolute");D.setStyle("bottom",0);D.append(C);I=new B.Node.create('<div class="'+E+'-clone-drag" />');C.append(I);G=new B.Node.create('<div class="'+E+'-clone-edit" />');C.append(G);B.on("click",B.bind(this._onClickEdit,this),G);H=new B.Node.create('<div class="'+E+'-clone-remove" />');C.append(H);B.on("click",B.bind(this._onClickRemove,this),H);this._refreshCloneNode();},getContentHeight:function(){var F=this.getContentNode(),C=B.Bewype.Utils.getHeight(F),E=B.Bewype.Utils.getStyleValue(F,"paddingTop")||0,D=B.Bewype.Utils.getStyleValue(F,"paddingBottom")||0;return C+E+D;},getContentWidth:function(){var F=this.getContentNode(),E=B.Bewype.Utils.getWidth(F),D=B.Bewype.Utils.getStyleValue(F,"paddingRight")||0,C=B.Bewype.Utils.getStyleValue(F,"paddingLeft")||0;return E+C+D;},getContentNode:function(){var D=this.get("host"),C=this.get("designerClass")+"-content",E=this.get("contentType")==="image"?"img.":"div.";return D.one(E+C);},getCloneNode:function(){var D=this.get("host"),C=this.get("designerClass")+"-content",E="div."+C+"-clone";return D.one(E);},_refreshCloneNode:function(E){var D=this.getCloneNode(),F=this.getContentHeight(),C=E||this.getContentWidth();if(D){D.setStyle("height",F-2);D.setStyle("width",C-2);}},refresh:function(C){var E=this.get("parentNode"),D=C?this.getContentNode():null;if(D){D.setStyle("width",C);D.setStyle("paddingLeft",0);D.setStyle("paddingRight",0);}this._refreshCloneNode(C);E.layoutDesignerTarget.refresh();}});B.namespace("Bewype");B.Bewype.LayoutDesignerContent=A;},"@VERSION@",{requires:["async-queue","plugin","substitute","bewype-editor"]});YUI.add("bewype-layout-designer-places",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-places";A.NS="layoutDesignerPlaces";A.H_PLACES_TEMPLATE='<table class="{designerClass}-places {designerClass}-places-horizontal">';A.H_PLACES_TEMPLATE+="<tr />";A.H_PLACES_TEMPLATE+="</table>";A.V_PLACES_TEMPLATE='<ul class="{designerClass}-places {designerClass}-places-vertical"></ul>';A.H_DEST_TEMPLATE='<td class="{designerClass}-cell {designerClass}-cell-horizontal">';A.H_DEST_TEMPLATE+='<div class="{designerClass}-container"></div>';A.H_DEST_TEMPLATE+="</td>";A.V_DEST_TEMPLATE='<li class="{designerClass}-cell {designerClass}-cell-vertical">';A.V_DEST_TEMPLATE+='<div class="{designerClass}-container"></div>';A.V_DEST_TEMPLATE+="</li>";B.extend(A,B.Bewype.LayoutDesignerConfig,{placesNode:null,contents:null,initializer:function(D){this.setAttrs(D);var F=this.get("host"),E=this.get("placesType"),C=A.H_PLACES_TEMPLATE,H=A.V_PLACES_TEMPLATE,I=E==="horizontal"?C:H,G=this.get("parentNode");this.placesNode=new B.Node.create(B.substitute(I,{designerClass:this.get("designerClass")}));F.append(this.placesNode);this.placesNode.setStyle("height",this.get("contentHeight"));this.placesNode.setStyle("width",this.get("contentWidth"));this._initSortable();if(G){G.layoutDesignerPlaces.registerContent(F);}this.contents=[];},_initSortable:function(){var J=this.get("host"),D=this.get("placesType"),L=this.get("designerClass"),F=D==="horizontal"?"td":"li",K=D==="horizontal"?"table":"ul",E="."+L+"-layout",G="."+L+"-content-clone-drag",H=B.Sortable.getSortable(this.placesNode),I=J.ancestor(E),C=I?I.all(K):null;if(H){H.destroy();}H=new B.Sortable({container:this.placesNode,nodes:F,opacity:".2",handles:[G]});if(!C){return;}C.each(function(N,M){if(this.placesNode!=N){var O=B.Sortable.getSortable(N);O.join(H,"full");}},this);},destructor:function(){var C=this.get("host"),D=this.get("parentNode");
B.Object.each(this.contents,function(F,E){if(F.layoutDesignerPlaces){F.unplug(B.Bewype.LayoutDesignerPlaces);}else{if(F.layoutDesignerContent){var G=F.layoutDesignerContent.get("contentType");F.unplug(B.Bewype.LayoutDesignerContent);}else{}}},this);if(D){D.layoutDesignerPlaces.unRegisterContent(C);}},hasSubPlaces:function(){var C=false;B.each(this.contents,function(E,D){if(E.layoutDesignerPlaces){C=true;}});return C;},getMaxWidth:function(){return B.Bewype.Utils.getWidth(this.get("host"));},getAvailablePlace:function(){var D=this.get("placesType"),E=this.getMaxWidth(),C=this.getPlacesWidth();if(D==="vertical"){return C===0?E:C;}else{return E-C;}},hasPlace:function(D){var C=this.getAvailablePlace(),E=this.get("placesType");D=D?D:this.get("contentWidth");return E==="vertical"||C>=D;},getPlacesWidth:function(){var C=0,D=this.get("parentNode")||this.placesNode.ancestor("div");switch(this.get("placesType")){case"vertical":if(!this.get("parentNode")){return B.Bewype.Utils.getWidth(D);}B.each(this.contents,function(F,E){var G=0;if(F.layoutDesignerPlaces){G=F.layoutDesignerPlaces.getPlacesWidth();}else{G=F.layoutDesignerContent.getContentWidth();}if(G>C){C=G;}});break;case"horizontal":B.each(this.contents,function(F,E){if(F.layoutDesignerPlaces){C+=F.layoutDesignerPlaces.getPlacesWidth();}else{C+=F.layoutDesignerContent.getContentWidth();}});break;}return C;},getPlacesHeight:function(){var C=0;switch(this.get("placesType")){case"vertical":B.each(this.contents,function(E,D){if(E.layoutDesignerPlaces){C+=E.layoutDesignerPlaces.getPlacesHeight();}else{C+=E.layoutDesignerContent.getContentHeight();}});break;case"horizontal":B.each(this.contents,function(E,D){var F=0;if(E.layoutDesignerPlaces){F=E.layoutDesignerPlaces.getPlacesHeight();}else{F=E.layoutDesignerContent.getContentHeight();}if(F>C){C=F;}});C=(C===0)?this.get("contentHeight"):C;break;}return C;},refresh:function(D){var C=this.get("placesType"),E=this.getPlacesHeight(),G=D?D:this.getPlacesWidth(),F=this.get("parentNode");E=E===0?this.get("contentHeight"):E;G=G===0?this.getAvailablePlace():G;this.placesNode.setStyle("height",E);this.placesNode.setStyle("width",G);switch(C){case"vertical":B.each(this.contents,function(J,I){var H=null;if(J.layoutDesignerPlaces){H=J.layoutDesignerPlaces.placesNode;H.setStyle("width",G);if(D){J.layoutDesignerTarget.refresh(D);}}else{if(D){J.layoutDesignerContent.refresh(D);}}});break;case"horizontal":B.Object.each(this.contents,function(J,I){var H=null,L=D?(D/this.contents.length):null,K=null;if(J.layoutDesignerPlaces){H=J.layoutDesignerPlaces.placesNode;if(L){J.layoutDesignerTarget.refresh(L);}}else{if(J.layoutDesignerContent){H=J.layoutDesignerContent.get("host");if(L){J.layoutDesignerContent.refresh(L);}}}K=H?H.ancestor("td"):null;if(K){K.setStyle("height",E);K.setStyle("vertical-align","top");}},this);break;}if(!F){this.placesNode.ancestor("div").setStyle("height",E);}return[E,G];},cleanContentOver:function(){B.each(this.contents,function(D,C){if(D.layoutDesignerContent){D.layoutDesignerContent._q.stop();D.layoutDesignerContent.hideClone();}});},addDestNode:function(){var C=null;switch(this.get("placesType")){case"horizontal":C=new B.Node.create(B.substitute(A.H_DEST_TEMPLATE,{designerClass:this.get("designerClass")}));this.placesNode.one("tr").append(C);break;case"vertical":C=new B.Node.create(B.substitute(A.V_DEST_TEMPLATE,{designerClass:this.get("designerClass")}));this.placesNode.append(C);break;}return C.one("div");},registerContent:function(C){this.contents.push(C);},unRegisterContent:function(C){var D=this.contents.indexOf(C);if(D!=-1){this.contents.splice(D,1);}},addContent:function(H){var D=this.get("placesType"),G=this.addDestNode(),C=null,F=this.getAttrs(),E=this.getMaxWidth();F.contentType=H;F.parentNode=this.get("host");F.contentWidth=D==="vertical"?E:this.getAvailablePlace();G.plug(B.Bewype.LayoutDesignerContent,F);return E;},removeContent:function(C,F){var G=null,D=this.get("host"),E=C.layoutDesignerContent.get("contentType");switch(this.get("placesType")){case"horizontal":G=C.ancestor("td");break;case"vertical":G=C.ancestor("li");break;}this.unRegisterContent(C);C.unplug(B.Bewype.LayoutDesignerContent);G.remove(true);if(D.layoutDesignerTarget){D.layoutDesignerTarget.refresh();}},getContents:function(){var C=[];B.each(this.contents,function(E,D){if(E.layoutDesignerPlaces){C=C.concat(E.layoutDesignerPlaces.getContents());}else{C.push(E);}});return C;}});B.namespace("Bewype");B.Bewype.LayoutDesignerPlaces=A;},"@VERSION@",{requires:["sortable","dd-constrain","bewype-layout-designer-content"]});YUI.add("bewype-layout-designer-sources",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-sources";A.NS="layoutDesignerSources";A.ITEM_SRC_TEMPLATE='<div class="{designerClass}-src {designerClass}-src-{itemType}">{itemLabel}</div>';B.extend(A,B.Bewype.LayoutDesignerConfig,{initializer:function(E){this.setAttrs(E);var G=this.get("host"),F=this.get("sourceGroups"),D=this.get("sourceLabels"),C=new B.Node.create("<table><tr /></table>");G.append(C);B.Object.each(F,function(J,I){var H=null,L=null,K=null;H=new B.Node.create(B.substitute(A.ITEM_SRC_TEMPLATE,{itemType:J,designerClass:this.get("designerClass"),itemLabel:D[I]}));L=new B.Node.create("<td />");L.append(H);C.append(L);H.setStyle("height",this.get("sourceHeight"));H.setStyle("width",this.get("sourceWidth"));K=new B.DD.Drag({node:H,groups:[J],dragMode:"point"});K.plug(B.Plugin.DDProxy,{moveOnEnd:false});K.plug(B.Plugin.DDConstrained,{constrain2node:[G,G.next()]});K.on("drag:start",B.bind(this._onDragStart,this,K));K.on("drag:end",B.bind(this._onDragEnd,this,K));},this);},destructor:function(){},_onDragStart:function(E,C){var D=E.get("node"),F=E.get("dragNode");D.setStyle("opacity",0.2);F.set("innerHTML",D.get("innerHTML"));F.setStyles({backgroundColor:D.getStyle("backgroundColor"),color:D.getStyle("color"),opacity:0.65});},_onDragEnd:function(D,C){D.get("node").setStyle("opacity",1);}});B.namespace("Bewype");
B.Bewype.LayoutDesignerSources=A;},"@VERSION@",{requires:["dd","plugin","substitute"]});YUI.add("bewype-layout-designer-target",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-target";A.NS="layoutDesignerTarget";B.extend(A,B.Bewype.LayoutDesignerConfig,{_targetNode:null,_dd:null,_groups:["horizontal","vertical","text","image"],initializer:function(D){this.setAttrs(D);var H=this.get("host"),F=this.get("targetType"),G=this.get("designerClass")+"-target",C=this.get("layoutWidth"),J=this.get("contentHeight"),I=this.get("contentWidth"),K=this.get("targetMinHeight"),L=this.get("targetMinWidth"),E=null;this._targetNode=new B.Node.create('<div class="'+G+" "+G+"-"+F+'" />');H.append(this._targetNode);if(F==="vertical"||F==="start"){E=H.ancestor("table")?I:C;this._targetNode.setStyle("height",K);this._targetNode.setStyle("width",E);}else{if(F==="horizontal"){this._targetNode.setStyle("height",J);this._targetNode.setStyle("width",L);}else{return;}}this._targetNode.setStyle("z-index",this.get("targetZIndex"));this._dd=new B.DD.Drop({node:this._targetNode,groups:this._groups,target:true,after:{"drop:enter":B.bind(this._onDropEnter,this),"drop:hit":B.bind(this._onDropHit,this),"drop:exit":B.bind(this._afterDropExit,this)}});if(F!="start"){B.on("mouseenter",B.bind(this._onMouseEnter,this),this._targetNode);B.on("mouseleave",B.bind(this._onMouseLeave,this),this._targetNode);}},destructor:function(){var C=this.get("host"),D=this._targetNode.one("div");this._dd.detachAll("drop:enter");this._dd.detachAll("drop:hit");this._dd.detachAll("drop:exit");if(D){D.detachAll("click");}this._targetNode.detachAll("mouseenter");this._targetNode.detachAll("mouseleave");this._targetNode.remove();C.unplug(B.Bewype.LayoutDesignerPlaces);},_onDropEnter:function(C){switch(this.get("targetType")){case"start":case"vertical":this._targetNode.setStyle("height",this.get("contentHeight"));break;case"horizontal":this._targetNode.setStyle("width",this.get("contentWidth"));break;}this.refresh();},_afterDropExit:function(C,D){switch(this.get("targetType")){case"start":case"vertical":this._targetNode.setStyle("height",this.get("targetMinHeight"));break;case"horizontal":this._targetNode.setStyle("width",this.get("targetMinWidth"));break;}this.refresh(D);},_onClickRemove:function(C){var E=this.get("host"),F=this.get("parentNode"),D=E.layoutDesignerPlaces.get("placesType");switch(D){case"horizontal":E.one("table").remove();break;case"vertical":E.one("ul").remove();break;}E.unplug(B.Bewype.LayoutDesignerTarget);E.unplug(B.Bewype.LayoutDesignerPlaces);if(F&&F.layoutDesignerTarget){E.remove(true);F.layoutDesignerTarget.refresh();}else{E.setStyle("height",this.get("targetMinHeight"));this._addTarget(E,"start");}},_onMouseEnter:function(C){var E=this.get("targetType"),D=this.get("designerClass")+"-target",F=this._targetNode.one("div");switch(E){case"start":case"vertical":this._targetNode.setStyle("height",this.get("targetOverHeight"));break;case"horizontal":this._targetNode.setStyle("width",this.get("targetOverWidth"));break;}if(F){F.setStyle("display","block");}else{F=new B.Node.create('<div class="'+D+"-remove "+D+"-"+E+'-remove" />');this._targetNode.append(F);B.on("click",B.bind(this._onClickRemove,this),F);}this.refresh();},_onMouseLeave:function(C){var D=this._targetNode.one("div");D.setStyle("display","none");this._afterDropExit(C);},_addPlaces:function(G,E){var D=this.get("host"),C=this.get("targetType"),F=this.getAttrs();F.placesType=E;F.parentNode=(C==="start"||E==="start")?null:D;G.plug(B.Bewype.LayoutDesignerPlaces,F);},_addTarget:function(G,E){var D=this.get("host"),C=this.get("targetType"),F=this.getAttrs();F.targetType=E;F.parentNode=(C==="start"||E==="start")?null:D;G.plug(B.Bewype.LayoutDesignerTarget,F);},_getHitType:function(C){var D=C.drag;if(D._groups.vertical){return"vertical";}else{if(D._groups.horizontal){return"horizontal";}else{if(D._groups.text){return"text";}else{if(D._groups.image){return"image";}else{return null;}}}}},_onDropHit:function(C){var E=this.get("host"),D=this.get("targetType"),F=this._getHitType(C),I=null,H=E.layoutDesignerPlaces,G=null;if(D==="start"){if(F==="text"||F==="image"){return this._afterDropExit(C);}E.unplug(B.Bewype.LayoutDesignerTarget);if(E.layoutDesignerPlaces){E.unplug(B.Bewype.LayoutDesignerPlaces);}}if(F===D){return;}else{if(F==="start"||F==="horizontal"||F==="vertical"){if(H&&H.get("placesType")!=="vertical"){G=H.getMaxWidth();}I=D==="start"?E:H.addDestNode();this._addPlaces(I,F);this._addTarget(I,F);if(F!=="start"){I.layoutDesignerTarget.refresh();}}else{G=H.addContent(F);}}this._afterDropExit(C,G);},refresh:function(G){var H=this.get("host"),E=this.get("targetType"),I=this.get("parentNode")||H,L=null,K=null,J=null,F=null,C=null,D=null;if(H.layoutDesignerPlaces){L=H.layoutDesignerPlaces.refresh(G);}else{return;}K=L[0];J=L[1];F=B.Bewype.Utils.getHeight(this._targetNode);C=B.Bewype.Utils.getWidth(this._targetNode);D=this._targetNode.ancestor("div");switch(E){case"vertical":K=B.Bewype.Utils.getHeight(I);if(I==H){this._targetNode.setY(I.getY()+K-F);}else{this._targetNode.setStyle("position","absolute");this._targetNode.setStyle("bottom",0);}this._targetNode.setStyle("width",J);break;case"horizontal":J=B.Bewype.Utils.getWidth(I);this._targetNode.setX(I.getX()+J-C);if(I==H){this._targetNode.setY(I.getY());}else{this._targetNode.setStyle("position","absolute");this._targetNode.setStyle("bottom",0);}this._targetNode.setStyle("height",K);break;default:return;}if(I.layoutDesignerTarget&&I!=H&&!G){I.layoutDesignerTarget.refresh();}}});B.namespace("Bewype");B.Bewype.LayoutDesignerTarget=A;},"@VERSION@",{requires:["bewype-layout-designer-places"]});YUI.add("bewype-layout-designer",function(A){},"@VERSION@",{use:["bewype-layout-designer-config","bewype-layout-designer-base","bewype-layout-designer-content","bewype-layout-designer-places","bewype-layout-designer-sources","bewype-layout-designer-target"]});