YUI.add("bewype-layout-designer-config",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-config";A.ATTRS={designerClass:{value:"layout-designer",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},targetStartActions:{value:["row","column"],writeOnce:true},targetHorizontalActions:{value:["column","text","image","remove"],writeOnce:true},targetVerticalActions:{value:["row","text","image","remove"],writeOnce:true},contentHeight:{value:40,validator:function(C){return B.Lang.isNumber(C);}},contentWidth:{value:40,validator:function(C){return B.Lang.isNumber(C);}},contentZIndex:{value:1,validator:function(C){return B.Lang.isNumber(C);}},defaultContent:{value:"Text..",validator:function(C){return B.Lang.isString(C);}},baseNode:{value:null,writeOnce:true},parentNode:{value:null},layoutWidth:{value:600,validator:function(C){return B.Lang.isNumber(C);}},placesType:{value:"start",validator:function(C){return B.Lang.isString(C);}},targetType:{value:"start",validator:function(C){return B.Lang.isString(C);}},contentType:{value:"text",validator:function(C){return B.Lang.isString(C);}},defaultText:{value:"Text ...",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},defaultImg:{value:B.config.base+"bewype-layout-designer/assets/blank.png",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},editorTextButtons:{value:["height","width","bold","italic","underline","title","font-family","font-size","text-align","color","background-color","url","file","reset","apply"]},editorImageButtons:{value:["file","background-color","padding-top","padding-bottom","text-align","reset","apply"]},fileStaticPath:{value:"http://www.bewype.org/uploads/",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},uploadUrl:{value:"http://www.bewype.org/upload",writeOnce:true},startingTargetType:{value:"start",writeOnce:true,validator:function(C){return B.Lang.isString(C);}}};B.extend(A,B.Plugin.Base);B.namespace("Bewype");B.Bewype.LayoutDesignerConfig=A;},"@VERSION@",{requires:["plugin"]});YUI.add("bewype-layout-designer-base",function(A){var B=function(C){B.superclass.constructor.apply(this,arguments);};B.NODE_PAN_TEMPLATE='<div class="{designerClass}-edit-panel"></div>';B.NODE_LAYOUT_TEMPLATE='<div class="{designerClass}-layout {designerClass}-places"></div>';B.NAME="layout-designer";B.NS="layoutDesigner";A.extend(B,A.Bewype.LayoutDesignerConfig,{nodeLayout:null,initializer:function(C){this.setAttrs(C);var E=this.get("host"),F=null,D=this.get("designerClass"),G=this.get("layoutWidth");this.nodeLayout=E.one("div."+D+"-layout");if(!this.nodeLayout){this.nodeLayout=new A.Node.create(A.substitute(B.NODE_LAYOUT_TEMPLATE,{designerClass:D}));E.append(this.nodeLayout);this.nodeLayout.setStyle("width",G);}C.baseNode=E;C.targetType=this.get("startingTargetType");this.nodeLayout.plug(A.Bewype.LayoutDesignerTarget,C);this.nodeLayout.layoutDesignerTarget.refresh();F=new A.Node.create(A.substitute(B.NODE_PAN_TEMPLATE,{designerClass:D}));E.append(F);A.DD.DDM.on("drop:hit",A.bind(this._dropHitGotcha,this));},destructor:function(){var E=this.get("host"),D=this.get("designerClass"),C=E.one("."+D+"-edit-panel");this.nodeLayout.unplug(A.Bewype.LayoutDesignerTarget);C.remove();},_dropHitGotcha:function(L){var D=L.drag.get("node"),N=D.get("tagName").toLowerCase(),H="."+this.get("designerClass")+"-places",M="."+this.get("designerClass")+"-container",J=D.one(M),G=D.one(H)?J:D.one(M),E=null,F=N==="li"?"ul":"table",I=J?J.ancestor(F):null,K=I?I.ancestor("div"):null,C=null;if(!G||!K.layoutDesignerPlaces){return;}else{if(G.layoutDesignerContent){E=G.layoutDesignerContent.get("parentNode");}else{if(G.layoutDesignerPlaces){E=G.layoutDesignerPlaces.get("parentNode");}else{return;}}}if(E!=K){E.layoutDesignerPlaces.unRegisterContent(G);K.layoutDesignerPlaces.registerContent(G);G.layoutDesignerContent.set("parentNode",K);C=K.layoutDesignerPlaces.getMaxWidth();K.layoutDesignerTarget.refresh(C);C=E.layoutDesignerPlaces.getMaxWidth();E.layoutDesignerTarget.refresh(C);}this.nodeLayout.all(".yui3-dd-draggable").each(function(P,O){if(P.getStyle("visibility")==="hidden"){P.remove();}});},getContents:function(){if(this.nodeLayout.layoutDesignerPlaces){return this.nodeLayout.layoutDesignerPlaces.getContents();}else{return[];}}});A.namespace("Bewype");A.Bewype.LayoutDesigner=B;},"@VERSION@",{requires:["bewype-layout-designer-sources","bewype-layout-designer-target"]});YUI.add("bewype-layout-designer-content",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.C_TEXT_TEMPLATE='<div class="{designerClass}-content ';A.C_TEXT_TEMPLATE+='{designerClass}-content-{contentType}">';A.C_TEXT_TEMPLATE+="{defaultContent}</div>";A.C_IMG_TEMPLATE='<div class="{designerClass}-content ';A.C_IMG_TEMPLATE+='{designerClass}-content-{contentType}">';A.C_IMG_TEMPLATE+='<img src="{defaultContent}" />';A.C_IMG_TEMPLATE+="</div>";A.NAME="layout-designer-content";A.NS="layoutDesignerContent";B.extend(A,B.Bewype.LayoutDesignerConfig,{initializer:function(C){this.setAttrs(C);var E=this.get("host"),I=this.get("parentNode"),G=this.get("contentType"),D=this.get("designerClass"),H=G==="text"?E.one("div"):E.one("img"),F=G==="text"?A.C_TEXT_TEMPLATE:A.C_IMG_TEMPLATE;if(!H){H=new B.Node.create(B.substitute(F,{designerClass:D,contentType:G,defaultContent:G==="text"?this.get("defaultText"):this.get("defaultImg")}));E.append(H);H.setStyle("height",this.get("contentHeight"));H.setStyle("width",this.get("contentWidth"));}this._addCloneNode();},destructor:function(){var E=this.get("host"),D=this.get("designerClass")+"-content",C=E.one("."+D+"-clone");if(C){C.one("."+D+"-clone-edit").detachAll("click");C.one("."+D+"-clone-remove").detachAll("click");C.remove();}},_detachEditor:function(){var G=this.get("host"),E=this.get("baseNode"),D=this.get("designerClass")+"-edit-panel",C=E.one("div."+D),I=this.get("contentType")==="image"?B.Bewype.EditorTag:B.Bewype.EditorText,H=this.getContentNode(),F=this.getCloneNode();
if(C&&C.bewypeEditorPanel){C.unplug(B.Bewype.EditorPanel);H.unplug(I);G.detachAll("bewype-editor:onClose");G.detachAll("bewype-editor:onChange");this.refresh();}if(C){C.setStyle("display","none");}if(F){F.setStyle("display","block");}this._refreshCloneNode();return true;},_attachEditor:function(){var G=this.get("baseNode"),D=this.get("parentNode"),M=this.get("designerClass")+"-edit-panel",L=G.one("div."+M),P=D.layoutDesignerPlaces,F=P.get("placesType"),J=this.get("contentType")==="image"?B.Bewype.EditorTag:B.Bewype.EditorText,E=this.get("contentType")==="image"?"editorImageButtons":"editorTextButtons",K=this.getContentNode(),I=this.getCloneNode(),H=null,O=null,N=(F==="vertical")?P.get("parentNode"):null,C=N?N.layoutDesignerPlaces:null;I.setStyle("display","none");L.setStyle("display","block");if(F==="vertical"){O=D.layoutDesignerPlaces.getMaxWidth();O+=C?C.getAvailablePlace():0;}else{O=D.layoutDesignerPlaces.getAvailablePlace();O+=this.getContentWidth();}H={panelNode:L,spinnerMaxWidth:O,activeButtons:this.get(E),fileStaticPath:this.get("fileStaticPath"),uploadUrl:this.get("uploadUrl")};K.plug(J,H);B.on("bewype-editor:onClose",B.bind(this._detachEditor,this),K);B.on("bewype-editor:onChange",B.bind(this.refresh,this),K);},_onClickEdit:function(C){var D=this.get("parentNode");B.each(D.layoutDesignerPlaces.getContents(),function(F,E){F.layoutDesignerContent._detachEditor();});this._attachEditor();},_onClickRemove:function(C){var D=this.get("host"),E=this.get("parentNode");E.layoutDesignerPlaces.removeContent(D);},_addCloneNode:function(){var F=this.get("host"),E=this.get("designerClass")+"-content",C=new B.Node.create('<div class="'+E+'-clone-callbacks" />'),D=null,I=null,G=null,H=null;D=F.cloneNode(false);D.set("innerHTML","");D.set("className",E+"-clone");F.append(D);D.setStyle("z-index",this.get("contentZIndex"));D.setStyle("position","absolute");D.setStyle("bottom",0);D.append(C);I=new B.Node.create('<div class="'+E+'-clone-drag" />');C.append(I);G=new B.Node.create('<div class="'+E+'-clone-edit" />');C.append(G);B.on("click",B.bind(this._onClickEdit,this),G);H=new B.Node.create('<div class="'+E+'-clone-remove" />');C.append(H);B.on("click",B.bind(this._onClickRemove,this),H);this._refreshCloneNode();},getContentHeight:function(){var F=this.getContentNode(),C=B.Bewype.Utils.getHeight(F),E=B.Bewype.Utils.getStyleValue(F,"paddingTop")||0,D=B.Bewype.Utils.getStyleValue(F,"paddingBottom")||0;return C+E+D;},getContentWidth:function(){var F=this.getContentNode(),E=B.Bewype.Utils.getWidth(F),D=B.Bewype.Utils.getStyleValue(F,"paddingRight")||0,C=B.Bewype.Utils.getStyleValue(F,"paddingLeft")||0;return E+C+D;},getContentNode:function(){var D=this.get("host"),C=this.get("designerClass")+"-content";return D.one("div."+C);},getCloneNode:function(){var D=this.get("host"),C=this.get("designerClass")+"-content",E="div."+C+"-clone";return D.one(E);},_refreshCloneNode:function(E){var D=this.getCloneNode(),F=this.getContentHeight(),C=E||this.getContentWidth();if(D){D.setStyle("height",F-2);D.setStyle("width",C-2);}},refresh:function(C){var E=this.get("parentNode"),D=C?this.getContentNode():null;if(D){D.setStyle("width",C);D.setStyle("paddingLeft",0);D.setStyle("paddingRight",0);}this._refreshCloneNode(C);E.layoutDesignerTarget.refresh();}});B.namespace("Bewype");B.Bewype.LayoutDesignerContent=A;},"@VERSION@",{requires:["async-queue","plugin","substitute","bewype-editor"]});YUI.add("bewype-layout-designer-places",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-places";A.NS="layoutDesignerPlaces";A.H_PLACES_TEMPLATE='<table class="{designerClass}-places ';A.H_PLACES_TEMPLATE+="{designerClass}-places-horizontal ";A.H_PLACES_TEMPLATE+='{designerClass}-places-{placesLevel}">';A.H_PLACES_TEMPLATE+="<tr />";A.H_PLACES_TEMPLATE+="</table>";A.V_PLACES_TEMPLATE='<ul class="{designerClass}-places ';A.V_PLACES_TEMPLATE+="{designerClass}-places-vertical ";A.V_PLACES_TEMPLATE+='{designerClass}-places-{placesLevel}"></ul>';A.H_DEST_TEMPLATE='<td class="{designerClass}-cell ';A.H_DEST_TEMPLATE+="{designerClass}-cell-horizontal ";A.H_DEST_TEMPLATE+='{designerClass}-cell-{placesLevel}">';A.H_DEST_TEMPLATE+='<div class="{designerClass}-container"></div>';A.H_DEST_TEMPLATE+="</td>";A.V_DEST_TEMPLATE='<li class="{designerClass}-cell ';A.V_DEST_TEMPLATE+="{designerClass}-cell-vertical ";A.V_DEST_TEMPLATE+='{designerClass}-cell-{placesLevel}">';A.V_DEST_TEMPLATE+='<div class="{designerClass}-container"></div>';A.V_DEST_TEMPLATE+="</li>";B.extend(A,B.Bewype.LayoutDesignerConfig,{placesNode:null,contents:null,level:null,initializer:function(E){this.setAttrs(E);var K=this.get("host"),H=K.get("children"),D=this.get("placesType"),O=this.get("designerClass"),F=A.H_PLACES_TEMPLATE,C=A.V_PLACES_TEMPLATE,N=D==="horizontal"?F:C,M=this.get("parentNode"),G=null,J=null,L=null,I=null;this.contents=[];this.level=this._getPlacesLevel();this.placesNode=H?H.item(0):null;if(this.placesNode){if(this.placesNode.hasClass(O+"-places-vertical")){this._tableToUl();D="vertical";I="horizontal";}else{D="horizontal";I="vertical";}J=this.getAttrs();J.parentNode=K;if(D==="horizontal"){L=this.placesNode.one("tr").get("children");}else{G=this.placesNode.get("children").item(0);if(G.get("tagName").toLowerCase()!=="tbody"){G=this.placesNode;}L=G.get("children");}L.each(function(R,Q){var S=R.get("children").item("0"),P=S?S.get("children").item("0"):null;if(!S){return;}if(P.get("tagName").toLowerCase()==="table"){J.targetType=I;S.plug(B.Bewype.LayoutDesignerTarget,J);J.targetType=null;J.placesType=I;S.plug(B.Bewype.LayoutDesignerPlaces,J);}else{J.contentType=P.hasClass(O+"-content-text")?"text":"image";S.plug(B.Bewype.LayoutDesignerContent,J);}this.registerContent(S);},this);}else{this.placesNode=new B.Node.create(B.substitute(N,{designerClass:O,placesLevel:this.level}));K.append(this.placesNode);this.placesNode.setStyle("height",this.get("contentHeight"));this.placesNode.setStyle("width",this.get("contentWidth"));
}this._initSortable();},_getPlacesLevel:function(){var D=this.get("host"),C=this.get("designerClass"),F=D.ancestor("."+C+"-places"),E=0;while(F){F=F.ancestor("."+C+"-places");E+=1;}return"level"+E;},_initSortable:function(){var L=this.get("host"),F=this.get("placesType"),N=this.get("designerClass"),H=F==="horizontal"?"td":"li",M=F==="horizontal"?"table":"ul",G="."+N+"-layout",I="."+N+"-content-clone-drag",J=B.Sortable.getSortable(this.placesNode),K=L.ancestor(G),E=K?K.all(M):null,C=N+"-cell-"+this.level,D=N+"-places-"+this.level;if(J){B.Sortable.unreg(J);}J=new B.Sortable({container:this.placesNode,nodes:H+"."+C,opacity:".2",handles:[I]});if(!E){return;}E.each(function(P,O){if(this.placesNode!=P&&P.hasClass(D)){var Q=B.Sortable.getSortable(P);if(Q){Q.join(J,"full");}}},this);},_tableToUl:function(){var E=B.Node.create("<ul />"),C=this.get("designerClass"),D=this.placesNode.get("children").item(0);if(D.get("tagName").toLowerCase()!=="tbody"){D=this.placesNode;}E.addClass(C+"-places");E.addClass(C+"-places-vertical");E.addClass(C+"-places-"+this.level);D.get("children").each(function(G,F){var I=B.Node.create("<li />"),H=G.one("td");I.addClass(C+"-cell");I.addClass(C+"-cell-vertical");I.addClass(C+"-cell-"+this.level);if(H){I.set("innerHTML",H.get("innerHTML"));}E.append(I);},this);this.placesNode.replace(E);this.placesNode=E;},_ulToTable:function(){var C=B.Node.create("<table />"),D=this.get("designerClass");C.addClass(D+"-places");C.addClass(D+"-places-vertical");C.addClass(D+"-places-"+this.level);this.placesNode.get("children").each(function(F,E){var H=B.Node.create("<tr />"),G=B.Node.create("<td />");G.addClass(D+"-cell");G.addClass(D+"-cell-vertical");G.addClass(D+"-cell-"+this.level);G.set("innerHTML",F.get("innerHTML"));H.append(G);C.append(H);},this);this.placesNode.replace(C);this.placesNode=C;},destructor:function(){var C=B.Sortable.getSortable(this.placesNode),D=this.get("placesType");B.Object.each(this.contents,function(F,E){if(F.layoutDesignerTarget){F.unplug(B.Bewype.LayoutDesignerTarget);}else{if(F.layoutDesignerContent){F.unplug(B.Bewype.LayoutDesignerContent);}else{}}},this);B.Sortable.unreg(C);if(D==="vertical"){this._ulToTable();}},hasSubPlaces:function(){var C=false;B.each(this.contents,function(E,D){if(E.layoutDesignerPlaces){C=true;}});return C;},getMaxWidth:function(){return B.Bewype.Utils.getWidth(this.get("host"));},getAvailablePlace:function(){var D=this.get("placesType"),E=this.getMaxWidth(),C=this.getPlacesWidth();if(D==="vertical"){return C===0?E:C;}else{return E-C;}},hasPlace:function(D){var C=this.getAvailablePlace(),E=this.get("placesType");D=D?D:this.get("contentWidth");return E==="vertical"||C>=D;},getPlacesWidth:function(){var C=0,D=this.get("parentNode")||this.placesNode.ancestor("div");switch(this.get("placesType")){case"vertical":if(!this.get("parentNode")){return B.Bewype.Utils.getWidth(D);}B.each(this.contents,function(F,E){var G=0;if(F.layoutDesignerPlaces){G=F.layoutDesignerPlaces.getPlacesWidth();}else{G=F.layoutDesignerContent.getContentWidth();}if(G>C){C=G;}});break;case"horizontal":B.each(this.contents,function(F,E){if(F.layoutDesignerPlaces){C+=F.layoutDesignerPlaces.getPlacesWidth();}else{C+=F.layoutDesignerContent.getContentWidth();}});break;}return C;},getPlacesHeight:function(){var C=0;switch(this.get("placesType")){case"vertical":B.each(this.contents,function(E,D){if(E.layoutDesignerPlaces){C+=E.layoutDesignerPlaces.getPlacesHeight();}else{C+=E.layoutDesignerContent.getContentHeight();}});break;case"horizontal":B.each(this.contents,function(E,D){var F=0;if(E.layoutDesignerPlaces){F=E.layoutDesignerPlaces.getPlacesHeight();}else{F=E.layoutDesignerContent.getContentHeight();}if(F>C){C=F;}});C=(C===0)?this.get("contentHeight"):C;break;}return C;},refresh:function(D){var C=this.get("placesType"),E=this.getPlacesHeight(),G=D?D:this.getPlacesWidth(),F=this.get("parentNode");G=G===0?this.getAvailablePlace():G;this.placesNode.setStyle("height",E);this.placesNode.setStyle("width",G);switch(C){case"vertical":B.each(this.contents,function(J,I){var H=null;if(J.layoutDesignerPlaces){H=J.layoutDesignerPlaces.placesNode;H.setStyle("width",G);if(D){J.layoutDesignerTarget.refresh(D);}}else{if(D){J.layoutDesignerContent.refresh(D);}}});break;case"horizontal":B.Object.each(this.contents,function(J,I){var H=null,L=D?(D/this.contents.length):null,K=null;if(J.layoutDesignerPlaces){H=J.layoutDesignerPlaces.placesNode;if(L){J.layoutDesignerTarget.refresh(L);}}else{if(J.layoutDesignerContent){H=J.layoutDesignerContent.get("host");if(L){J.layoutDesignerContent.refresh(L);}}}K=H?H.ancestor("td"):null;if(K){K.setStyle("height",E);K.setStyle("vertical-align","top");}},this);break;}if(!F){this.placesNode.ancestor("div").setStyle("height",E);}return[E,G];},cleanContentOver:function(){B.each(this.contents,function(D,C){if(D.layoutDesignerContent){D.layoutDesignerContent._q.stop();D.layoutDesignerContent.hideClone();}});},addDestNode:function(){var C=null;switch(this.get("placesType")){case"horizontal":C=new B.Node.create(B.substitute(A.H_DEST_TEMPLATE,{designerClass:this.get("designerClass"),placesLevel:this.level}));this.placesNode.one("tr").append(C);break;case"vertical":C=new B.Node.create(B.substitute(A.V_DEST_TEMPLATE,{designerClass:this.get("designerClass"),placesLevel:this.level}));this.placesNode.append(C);break;}return C.one("div");},registerContent:function(C){this.contents.push(C);this._initSortable();},unRegisterContent:function(C){var D=this.contents.indexOf(C);if(D!=-1){this.contents.splice(D,1);}},addContent:function(G){var C=this.get("placesType"),F=this.addDestNode(),E=this.getAttrs(),D=this.getMaxWidth();E.contentType=G;E.parentNode=this.get("host");E.contentWidth=C==="vertical"?D:this.getAvailablePlace();F.plug(B.Bewype.LayoutDesignerContent,E);this.registerContent(F);},removeContent:function(C,E){var F=null,D=this.get("host");switch(this.get("placesType")){case"horizontal":F=C.ancestor("td");break;case"vertical":F=C.ancestor("li");break;}this.unRegisterContent(C);
C.unplug(B.Bewype.LayoutDesignerContent);F.remove(true);if(D.layoutDesignerTarget){D.layoutDesignerTarget.refresh(this.getMaxWidth());}},getContents:function(){var C=[];B.each(this.contents,function(E,D){if(E.layoutDesignerPlaces){C=C.concat(E.layoutDesignerPlaces.getContents());}else{C.push(E);}});return C;}});B.namespace("Bewype");B.Bewype.LayoutDesignerPlaces=A;},"@VERSION@",{requires:["sortable","dd-constrain","bewype-layout-designer-content"]});YUI.add("bewype-layout-designer-target",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-target";A.NS="layoutDesignerTarget";B.extend(A,B.Bewype.LayoutDesignerConfig,{_targetNode:null,initializer:function(E){this.setAttrs(E);var G=this.get("host"),D=this.get("targetType"),F=this.get("designerClass"),C=F+"-target",I=G.get("children"),H=I?I.item(0):null,J=null;if(D!=="start"||H){E.targetType=null;if(H){if(H.hasClass(F+"-places-vertical")){E.placesType="vertical";}else{E.placesType="horizontal";}}else{E.placesType=D;}this.set("targetType",E.placesType);D=E.placesType;G.plug(B.Bewype.LayoutDesignerPlaces,E);}this._targetNode=new B.Node.create('<div class="'+C+" "+C+"-"+D+'" />');G.append(this._targetNode);J=new B.Node.create('<div class="'+C+" "+C+'-inner" />');this._targetNode.append(J);B.Object.each(this._getTargetActions(),function(L,K){this._addTargetAction(J,L);},this);},destructor:function(){var C=this.get("host");B.Object.each(this._getTargetActions(),function(E,D){this._removeTargetAction(E);},this);this._targetNode.remove();if(C.layoutDesignerPlaces){C.unplug(B.Bewype.LayoutDesignerPlaces);}},_addPlaces:function(E){var I=this.get("host"),K=this.get("parentNode"),C=this.get("targetType"),G=E==="column"?"vertical":"horizontal",J=null,H=this.getAttrs(),F=I.layoutDesignerPlaces,D=F?F.getMaxWidth():B.Bewype.Utils.getWidth(I);if(C==="start"){I.unplug(B.Bewype.LayoutDesignerTarget);I.unplug(B.Bewype.LayoutDesignerPlaces);}else{if(!F){return;}}J=C==="start"?I:F.addDestNode();H.targetType=G;H.parentNode=C==="start"?null:I;J.plug(B.Bewype.LayoutDesignerTarget,H);if(F){F.registerContent(J);}this.refresh(D);},_onClickRemove:function(){var F=this.get("host"),I=this.get("parentNode"),D=this.get("targetType"),H=I?I.layoutDesignerPlaces:null,E=F.layoutDesignerPlaces.get("placesType"),C=null,J=null,G=null;F.unplug(B.Bewype.LayoutDesignerTarget);F.one("table").remove();if(I){H.unRegisterContent(F);switch(D){case"horizontal":C=F.ancestor("li");break;case"vertical":C=F.ancestor("td");break;}C.remove(true);J=H.getMaxWidth();I.layoutDesignerTarget.refresh(J);}else{G=this.getAttrs();G.targetType="start";F.plug(B.Bewype.LayoutDesignerTarget,G);}},_onClickAction:function(E,C){switch(E){case"column":case"row":return this._addPlaces(E);case"text":case"image":var D=this.get("host"),F=D.layoutDesignerPlaces.getMaxWidth();D.layoutDesignerPlaces.addContent(E);return this.refresh(F);case"remove":return this._onClickRemove();default:break;}},_getTargetActions:function(){switch(this.get("targetType")){case"start":return this.get("targetStartActions");case"horizontal":return this.get("targetHorizontalActions");case"vertical":return this.get("targetVerticalActions");default:break;}},_addTargetAction:function(E,F){var D=this.get("designerClass")+"-target-action",C=E.one("div."+D+"-"+F);if(C){C.setStyle("display","block");}else{C=new B.Node.create('<div class="'+D+" "+D+"-"+F+'" />');E.append(C);B.on("click",B.bind(this._onClickAction,this,F),C);}},_removeTargetAction:function(E){var D=this.get("designerClass")+"-target-action",C=this.get("host").one("div."+D+"-"+E);if(C){C.detachAll("click");C.remove();}},refresh:function(D){var C=this.get("host"),E=this.get("parentNode")||C;if(C.layoutDesignerPlaces){C.layoutDesignerPlaces.refresh(D);}else{return;}if(E.layoutDesignerTarget&&E!=C&&!D){E.layoutDesignerTarget.refresh();}}});B.namespace("Bewype");B.Bewype.LayoutDesignerTarget=A;},"@VERSION@",{requires:["bewype-layout-designer-places"]});YUI.add("bewype-layout-designer",function(A){},"@VERSION@",{use:["bewype-layout-designer-config","bewype-layout-designer-base","bewype-layout-designer-content","bewype-layout-designer-places","bewype-layout-designer-target"]});