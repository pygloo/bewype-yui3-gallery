YUI.add("bewype-layout-designer-base",function(A){var B=function(C){B.superclass.constructor.apply(this,arguments);};B.NODE_SRC_TEMPLATE='<div class="{designerClass}-sources"></div>';B.NODE_PAN_TEMPLATE='<div class="{designerClass}-edit-panel"></div>';B.NODE_LAYOUT_TEMPLATE='<div class="{designerClass}-layout"></div>';B.NAME="layout-designer";B.NS="layoutDesigner";A.extend(B,A.Bewype.LayoutDesignerConfig,{nodeLayout:null,initializer:function(C){this.setAttrs(C);var E=this.get("host"),G=null,F=null,D=this.get("designerClass"),H=this.get("layoutWidth");G=new A.Node.create(A.substitute(B.NODE_SRC_TEMPLATE,{designerClass:D}));E.append(G);G.plug(A.Bewype.LayoutDesignerSources,{layoutWidth:H});F=new A.Node.create(A.substitute(B.NODE_PAN_TEMPLATE,{designerClass:D}));E.append(F);this.nodeLayout=new A.Node.create(A.substitute(B.NODE_LAYOUT_TEMPLATE,{designerClass:D}));E.append(this.nodeLayout);this.nodeLayout.setStyle("width",H);C.baseNode=E;C.targetType="start";this.nodeLayout.plug(A.Bewype.LayoutDesignerTarget,C);A.DD.DDM.on("drop:hit",A.bind(this._dropHitGotcha,this));},destructor:function(){var E=this.get("host"),D=this.get("designerClass"),F=E.one("."+D+"-sources"),C=E.one("."+D+"-edit-panel"),G=this.nodeLayout.one("table")||this.nodeLayout.one("ul");F.remove();C.remove();this.nodeLayout.unplug(A.Bewype.LayoutDesignerTarget);if(G){this.nodeLayout.replace(G);}else{this.nodeLayout.remove();}},_dropHitGotcha:function(M){var E=M.drag.get("node"),O=E.get("tagName").toLowerCase(),I="."+this.get("designerClass")+"-places",N="."+this.get("designerClass")+"-container",K=E.one(N),H=E.one(I)?K:E.one(N),C=null,F=null,G=O==="li"?"ul":"table",J=K?K.ancestor(G):null,L=J?J.ancestor("div"):null,D=null;if(!H||!L.layoutDesignerPlaces){return;}else{if(H.layoutDesignerContent){F=H.layoutDesignerContent.get("parentNode");}else{if(H.layoutDesignerPlaces){F=H.layoutDesignerPlaces.get("parentNode");}else{return;}}}if(F!=L){F.layoutDesignerPlaces.unRegisterContent(H);L.layoutDesignerPlaces.registerContent(H);H.layoutDesignerContent.set("parentNode",L);D=L.layoutDesignerPlaces.getMaxWidth();L.layoutDesignerTarget.refresh(D);}},getContents:function(){if(this.nodeLayout.layoutDesignerPlaces){return this.nodeLayout.layoutDesignerPlaces.getContents();}else{return[];}}});A.namespace("Bewype");A.Bewype.LayoutDesigner=B;},"@VERSION@",{requires:["bewype-layout-designer-sources","bewype-layout-designer-target"]});