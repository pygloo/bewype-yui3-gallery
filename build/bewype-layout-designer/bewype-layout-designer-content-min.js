YUI.add("bewype-layout-designer-content",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-content";A.NS="layoutDesignerContent";A.ATTRS={contentHeight:{value:40,validator:function(C){return B.Lang.isNumber(C);}},contentWidth:{value:140,validator:function(C){return B.Lang.isNumber(C);}},contentZIndex:{value:1,validator:function(C){return B.Lang.isNumber(C);}},contentClass:{value:"content",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},defaultContent:{value:"Click to change your content..",validator:function(C){return B.Lang.isString(C);}},parentNode:{value:null},editPanelNode:{value:null,writeOnce:true}};B.extend(A,B.Plugin.Base,{_q:null,editing:false,initializer:function(C){var D=this.get("host"),E=this.get("parentNode");D.setStyle("height",this.get("contentHeight"));D.setStyle("width",this.get("contentWidth"));D.set("innerHTML",this.get("defaultContent"));B.on("mouseenter",B.bind(this._onMouseEnter,this),D);E.layoutDesignerPlaces.registerContent(D);this._q=new B.AsyncQueue();},destructor:function(){var E=this.get("host"),G=this.get("parentNode"),D=this.get("contentClass"),C=E.ancestor("div"),F=C.one("div."+D+"-clone");this._detachEditor();G.layoutDesignerPlaces.unRegisterContent(E);B.detach(E);if(F){B.Event.purgeElement(F,true);F.remove();}E.remove();},_detachEditor:function(){var C=this.get("host");C.detachAll("bewype-editor:onClose");C.detachAll("bewype-editor:onChange");this.editing=false;this.refresh();if(C.bewypeEditor){C.unplug(B.Bewype.Editor);}},_attachEditor:function(){var E=this.get("host"),H=this.get("parentNode"),G=this.get("editPanelNode"),D=H.layoutDesignerPlaces.getAvailablePlace(),C=null,F=null;if(G){if(D){F=D;F+=this.getContentWidth();C={panelNode:G,spinnerMaxWidth:F};}else{C={panelNode:G};}E.plug(B.Bewype.Editor,C);this.editing=true;B.on("bewype-editor:onClose",B.bind(this._detachEditor,this),E);B.on("bewype-editor:onChange",B.bind(this.refresh,this),E);}},_onClickEdit:function(C){var E=this.get("parentNode"),D=this.get("editPanelNode");if(D){B.each(E.layoutDesignerPlaces.getContents(),function(G,F){G.layoutDesignerContent._detachEditor();});this._attachEditor();}},_onClickRemove:function(C){var D=this.get("host"),E=this.get("parentNode");E.layoutDesignerPlaces.removeContent(D);},hideClone:function(D){if(!D){var F=this.get("host"),E=this.get("contentClass"),C=F.ancestor("div");D=C.one("div."+E+"-clone");}if(D){B.each(D.all("div"),function(H,G){H.setStyle("visibility","hidden");});D.setStyle("visibility","hidden");}},_addCloneNode:function(I){var F=this.get("host"),E=this.get("contentClass"),C=new B.Node.create('<div class="'+E+'-clone-callbacks" />'),D=null,G=null,H=null;D=F.cloneNode(false);D.set("innerHTML","");D.set("className",E+"-clone");I.append(D);D.setStyle("z-index",this.get("contentZIndex"));D.setStyle("position","absolute");D.setStyle("bottom",0);D.append(C);G=new B.Node.create('<div class="'+E+'-clone-edit" />');C.append(G);B.on("click",B.bind(this._onClickEdit,this),G);H=new B.Node.create('<div class="'+E+'-clone-remove" />');C.append(H);B.on("click",B.bind(this._onClickRemove,this),H);return D;},_onMouseEnter:function(D){if(this.editing){return;}var F=this.get("host"),H=this.get("parentNode"),E=this.get("contentClass"),C=F.ancestor("div"),G=C.one("div."+E+"-clone");H.layoutDesignerPlaces.cleanContentOver();if(G){B.each(G.all("div"),function(J,I){J.setStyle("visibility","visible");});G.setStyle("visibility","visible");}else{G=this._addCloneNode(C);}this._q.stop();this._q.add({fn:function(){},timeout:1000},{fn:this.hideClone,args:[G]});this._q.run();},getContentHeight:function(){var D=this.get("host"),C=B.Bewype.Utils.getHeight(D),E=B.Bewype.Utils.getStyleValue(D,"paddingTop")||0;return C+E;},getContentWidth:function(){var D=this.get("host"),E=B.Bewype.Utils.getWidth(D),C=B.Bewype.Utils.getStyleValue(D,"paddingLeft")||0;return E+C;},refresh:function(D,H){var F=this.get("host"),I=this.get("parentNode"),E=this.get("contentClass"),C=F.ancestor("div"),G=C.one("div."+E+"-clone");if(G){G.setStyle("height",this.getContentHeight());G.setStyle("width",this.getContentWidth());}I.layoutDesignerTarget.refresh();}});B.namespace("Bewype");B.Bewype.LayoutDesignerContent=A;},"@VERSION@",{requires:["async-queue","plugin","substitute","bewype-editor"]});