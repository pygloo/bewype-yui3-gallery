YUI.add("bewype-layout-designer-content",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-content";A.NS="layoutDesignerContent";A.ATTRS={contentHeight:{value:40,validator:function(C){return B.Lang.isNumber(C);}},contentWidth:{value:140,validator:function(C){return B.Lang.isNumber(C);}},contentZIndex:{value:1,validator:function(C){return B.Lang.isNumber(C);}},contentClass:{value:"content",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},defaultContent:{value:"Click to change your content..",validator:function(C){return B.Lang.isString(C);}},defaultStyle:{value:null},parentNode:{value:null},removeCallback:{value:null},editCallback:{value:null}};B.extend(A,B.Plugin.Base,{_q:null,editing:false,initializer:function(C){var D=this.get("host"),E=this.get("parentNode");D.setStyle("height",this.get("contentHeight"));D.setStyle("width",this.get("contentWidth"));D.set("innerHTML",this.get("defaultContent"));B.on("mouseenter",B.bind(this._onMouseEnter,this),D);E.layoutDesignerPlaces.registerContent(D);this._q=new B.AsyncQueue();},destructor:function(){var E=this.get("host"),G=this.get("parentNode"),D=this.get("contentClass"),C=E.ancestor("div"),F=C.one("div."+D+"-clone");G.layoutDesignerPlaces.unRegisterContent(E);B.detach(E);if(F){B.Event.purgeElement(F,true);F.remove();}E.remove();},_onClickEdit:function(C){var D=this.get("editCallback");if(D){this.editing=true;this.hideClone();D(this.get("host"));}},_onClickRemove:function(C){var D=this.get("removeCallback");if(D){D(this.get("host"));}},hideClone:function(D){if(!D){var F=this.get("host"),E=this.get("contentClass"),C=F.ancestor("div");D=C.one("div."+E+"-clone");}if(D){B.each(D.all("div"),function(H,G){H.setStyle("visibility","hidden");});D.setStyle("visibility","hidden");}},_addCloneNode:function(C){var J=this.get("host"),E=this.get("contentClass"),H=this.get("editCallback"),D=this.get("removeCallback"),I=new B.Node.create('<div class="'+E+'-clone-callbacks" />'),F=null,K=null,G=null;F=J.cloneNode(false);F.set("innerHTML","");F.set("className",E+"-clone");C.append(F);F.setStyle("z-index",this.get("contentZIndex"));F.setStyle("position","absolute");F.setStyle("bottom",0);F.append(I);if(H){K=new B.Node.create('<div class="'+E+'-clone-edit" />');I.append(K);B.on("click",B.bind(this._onClickEdit,this),K);}if(D){G=new B.Node.create('<div class="'+E+'-clone-remove" />');I.append(G);B.on("click",B.bind(this._onClickRemove,this),G);}return F;},_onMouseEnter:function(D){if(this.editing){return;}var F=this.get("host"),H=this.get("parentNode"),E=this.get("contentClass"),C=F.ancestor("div"),G=C.one("div."+E+"-clone");H.layoutDesignerPlaces.cleanContentOver();if(G){B.each(G.all("div"),function(J,I){J.setStyle("visibility","visible");});G.setStyle("visibility","visible");}else{G=this._addCloneNode(C);}this._q.stop();this._q.add({fn:function(){},timeout:1000},{fn:this.hideClone,args:[G]});this._q.run();},_getHeight:function(D,C){C=C?C:0;return parseInt(D.getComputedStyle("height")||D.getAttribute("height"),C);},_getWidth:function(D,C){C=C?C:0;return parseInt(D.getComputedStyle("width")||D.getAttribute("width"),C);},getContentHeight:function(){var C=this.get("host");return this._getHeight(C);},getContentWidth:function(){var C=this.get("host");return this._getWidth(C);},refresh:function(){var G=this.get("host"),I=this.get("parentNode"),F=this.get("contentClass"),D=G.ancestor("div"),H=D.one("div."+F+"-clone"),E=this.getContentHeight(),C=this.getContentWidth();G.setStyle("height",E);G.setStyle("width",C);this.set("contentHeight",this._getHeight(D));this.set("contentWidth",this._getWidth(D));if(H){H.setStyle("height",this.get("contentHeight"));H.setStyle("width",this.get("contentWidth"));}I.layoutDesignerTarget.refresh();}});B.namespace("Bewype");B.Bewype.LayoutDesignerContent=A;},"@VERSION@",{requires:["async-queue","plugin","substitute"]});