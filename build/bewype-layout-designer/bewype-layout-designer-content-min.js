YUI.add("bewype-layout-designer-content",function(b){var a=function(c){a.superclass.constructor.apply(this,arguments);};a.NAME="layout-designer-content";a.NS="layoutDesignerContent";a.ATTRS={designerClass:{value:"layout-designer",writeOnce:true,validator:function(c){return b.Lang.isString(c);}},contentHeight:{value:40,validator:function(c){return b.Lang.isNumber(c);}},contentWidth:{value:140,validator:function(c){return b.Lang.isNumber(c);}},contentZIndex:{value:1,validator:function(c){return b.Lang.isNumber(c);}},defaultContent:{value:"Click to change your content..",validator:function(c){return b.Lang.isString(c);}},parentNode:{value:null,writeOnce:false},editPanelNode:{value:null,writeOnce:true}};b.extend(a,b.Plugin.Base,{_q:null,editing:false,initializer:function(c){var d=this.get("host"),e=this.get("parentNode");d.setStyle("height",this.get("contentHeight"));d.setStyle("width",this.get("contentWidth"));d.set("innerHTML",this.get("defaultContent"));b.on("mouseenter",b.bind(this._onMouseEnter,this),d);e.layoutDesignerPlaces.registerContent(d);this._q=new b.AsyncQueue();},destructor:function(){var e=this.get("host"),g=this.get("parentNode"),d=this.get("designerClass")+"-content",c=e.ancestor("div"),f=c.one("div."+d+"-clone");this._detachEditor();g.layoutDesignerPlaces.unRegisterContent(e);b.detach(e);if(f){b.Event.purgeElement(f,true);f.remove();}e.remove();},_detachEditor:function(){var c=this.get("host");c.detachAll("bewype-editor:onClose");c.detachAll("bewype-editor:onChange");this.editing=false;this.refresh();if(c.bewypeEditor){c.unplug(b.Bewype.Editor);}},_attachEditor:function(){var e=this.get("host"),h=this.get("parentNode"),g=this.get("editPanelNode"),d=h.layoutDesignerPlaces.getAvailablePlace(),c=null,f=null;if(g){if(d){f=d;f+=this.getContentWidth();c={panelNode:g,spinnerMaxWidth:f};}else{c={panelNode:g};}e.plug(b.Bewype.Editor,c);this.editing=true;b.on("bewype-editor:onClose",b.bind(this._detachEditor,this),e);b.on("bewype-editor:onChange",b.bind(this.refresh,this),e);}},_onClickEdit:function(c){var e=this.get("parentNode"),d=this.get("editPanelNode");if(d){b.each(e.layoutDesignerPlaces.getContents(),function(g,f){g.layoutDesignerContent._detachEditor();});this._attachEditor();}},_onClickRemove:function(c){var d=this.get("host"),e=this.get("parentNode");e.layoutDesignerPlaces.removeContent(d);},hideClone:function(d){if(!d){var f=this.get("host"),e=this.get("designerClass")+"-content",c=f.ancestor("div");d=c.one("div."+e+"-clone");}if(d){b.each(d.all("div"),function(h,g){h.setStyle("visibility","hidden");});d.setStyle("visibility","hidden");}},_addCloneNode:function(){var g=this.get("host"),j=this.get("designerClass")+"-container",f=this.get("designerClass")+"-content",d=g.ancestor("div."+j),c=new b.Node.create('<div class="'+f+'-clone-callbacks" />'),e=null,h=null,i=null;e=g.cloneNode(false);e.set("innerHTML","");e.set("className",f+"-clone");d.append(e);e.setStyle("z-index",this.get("contentZIndex"));e.setStyle("position","absolute");e.setStyle("bottom",0);e.append(c);h=new b.Node.create('<div class="'+f+'-clone-edit" />');c.append(h);b.on("click",b.bind(this._onClickEdit,this),h);i=new b.Node.create('<div class="'+f+'-clone-remove" />');c.append(i);b.on("click",b.bind(this._onClickRemove,this),i);return e;},_onMouseEnter:function(d){if(this.editing){return;}var f=this.get("host"),i=this.get("parentNode"),h=this.get("designerClass")+"-container",e=this.get("designerClass")+"-content",c=f.ancestor("div."+h),g=c.one("div."+e+"-clone");i.layoutDesignerPlaces.cleanContentOver();if(g){b.each(g.all("div"),function(l,j){l.setStyle("visibility","visible");});g.setStyle("visibility","visible");}else{g=this._addCloneNode();}this._q.stop();this._q.add({fn:function(){},timeout:1000},{fn:this.hideClone,args:[g]});this._q.run();},getContentHeight:function(){var d=this.get("host"),c=b.Bewype.Utils.getHeight(d),e=b.Bewype.Utils.getStyleValue(d,"paddingTop")||0;return c+e;},getContentWidth:function(){var d=this.get("host"),e=b.Bewype.Utils.getWidth(d),c=b.Bewype.Utils.getStyleValue(d,"paddingLeft")||0;return e+c;},refresh:function(){var e=this.get("host"),j=this.get("parentNode"),i=this.get("designerClass")+"-container",d=this.get("designerClass")+"-content",g=e.ancestor("div."+i),f=g.one("div."+d+"-clone"),h=this.getContentHeight(),c=this.getContentWidth();if(f){f.setStyle("height",h);f.setStyle("width",c);}j.layoutDesignerTarget.refresh();}});b.namespace("Bewype");b.Bewype.LayoutDesignerContent=a;},"@VERSION@",{requires:["async-queue","plugin","substitute","bewype-editor"]});