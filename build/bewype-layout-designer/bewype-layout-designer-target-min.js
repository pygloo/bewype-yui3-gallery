YUI.add("bewype-layout-designer-target",function(b){var a=function(c){a.superclass.constructor.apply(this,arguments);};a.NAME="layout-designer-target";a.NS="layoutDesignerTarget";b.extend(a,b.Bewype.LayoutDesignerConfig,{_targetNode:null,initializer:function(e){this.setAttrs(e);var g=this.get("host"),d=this.get("targetType"),f=this.get("designerClass"),c=f+"-target",i=g.get("children"),h=i?i.item(0):null,j=null;if(d!=="start"||h){e.targetType=null;if(h){if(h.hasClass(f+"-places-vertical")){e.placesType="vertical";}else{e.placesType="horizontal";}}else{e.placesType=d;}this.set("targetType",e.placesType);d=e.placesType;g.plug(b.Bewype.LayoutDesignerPlaces,e);}this._targetNode=new b.Node.create('<div class="'+c+" "+c+"-"+d+'" />');g.append(this._targetNode);j=new b.Node.create('<div class="'+c+" "+c+'-inner" />');this._targetNode.append(j);b.Object.each(this._getTargetActions(),function(m,l){this._addTargetAction(j,m);},this);},destructor:function(){var c=this.get("host");b.Object.each(this._getTargetActions(),function(e,d){this._removeTargetAction(e);},this);this._targetNode.remove();if(c.layoutDesignerPlaces){c.unplug(b.Bewype.LayoutDesignerPlaces);}},_addPlaces:function(e){var i=this.get("host"),k=this.get("parentNode"),c=this.get("targetType"),g=e==="column"?"vertical":"horizontal",j=null,h=this.getAttrs(),f=i.layoutDesignerPlaces,d=f?f.getMaxWidth():b.Bewype.Utils.getWidth(i);if(c==="start"){i.unplug(b.Bewype.LayoutDesignerTarget);i.unplug(b.Bewype.LayoutDesignerPlaces);}else{if(!f){return;}}j=c==="start"?i:f.addDestNode();h.targetType=g;h.parentNode=c==="start"?null:i;j.plug(b.Bewype.LayoutDesignerTarget,h);if(f){f.registerContent(j);}this.refresh(d);},_onClickRemove:function(){var f=this.get("host"),i=this.get("parentNode"),d=this.get("targetType"),h=i?i.layoutDesignerPlaces:null,e=f.layoutDesignerPlaces.get("placesType"),c=null,j=null,g=null;f.unplug(b.Bewype.LayoutDesignerTarget);f.one("table").remove();if(i){h.unRegisterContent(f);switch(d){case"horizontal":c=f.ancestor("li");break;case"vertical":c=f.ancestor("td");break;}c.remove(true);j=h.getMaxWidth();i.layoutDesignerTarget.refresh(j);}else{g=this.getAttrs();g.targetType="start";f.plug(b.Bewype.LayoutDesignerTarget,g);}},_onClickAction:function(e,c){switch(e){case"column":case"row":return this._addPlaces(e);case"text":case"image":var d=this.get("host"),f=d.layoutDesignerPlaces.getMaxWidth();d.layoutDesignerPlaces.addContent(e);return this.refresh(f);case"remove":return this._onClickRemove();default:break;}},_getTargetActions:function(){switch(this.get("targetType")){case"start":return this.get("targetStartActions");case"horizontal":return this.get("targetHorizontalActions");case"vertical":return this.get("targetVerticalActions");default:break;}},_addTargetAction:function(e,f){var d=this.get("designerClass")+"-target-action",c=e.one("div."+d+"-"+f);if(c){c.setStyle("display","block");}else{c=new b.Node.create('<div class="'+d+" "+d+"-"+f+'" />');e.append(c);b.on("click",b.bind(this._onClickAction,this,f),c);}},_removeTargetAction:function(e){var d=this.get("designerClass")+"-target-action",c=this.get("host").one("div."+d+"-"+e);if(c){c.detachAll("click");c.remove();}},refresh:function(d){var c=this.get("host"),e=this.get("parentNode")||c;if(c.layoutDesignerPlaces){c.layoutDesignerPlaces.refresh(d);}else{return;}if(e.layoutDesignerTarget&&e!=c&&!d){e.layoutDesignerTarget.refresh();}}});b.namespace("Bewype");b.Bewype.LayoutDesignerTarget=a;},"@VERSION@",{requires:["bewype-layout-designer-places"]});