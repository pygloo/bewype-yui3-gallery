YUI.add("bewype-layout-designer-target",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.NAME="layout-designer-target";A.NS="layoutDesignerTarget";B.extend(A,B.Bewype.LayoutDesignerConfig,{_targetNode:null,_groups:["horizontal","vertical","text","image"],initializer:function(E){this.setAttrs(E);var F=this.get("host"),D=this.get("targetType"),C=this.get("designerClass")+"-target",G=null;this._targetNode=new B.Node.create('<div class="'+C+" "+C+"-"+D+'" />');F.append(this._targetNode);G=new B.Node.create('<div class="'+C+" "+C+'-inner" />');this._targetNode.append(G);B.Object.each(this._getTargetActions(),function(I,H){this._addTargetAction(G,I);},this);},destructor:function(){var C=this.get("host");this._targetNode.remove();C.unplug(B.Bewype.LayoutDesignerPlaces);},_addPlaces:function(H){var D=this.get("host"),C=this.get("targetType"),E=H==="column"?"vertical":"horizontal",J=null,G=this.getAttrs(),F=D.layoutDesignerPlaces,I=F?F.getMaxWidth():B.Bewype.Utils.getWidth(D);if(C==="start"){D.unplug(B.Bewype.LayoutDesignerTarget);D.unplug(B.Bewype.LayoutDesignerPlaces);}else{if(!F){return;}}J=C==="start"?D:F.addDestNode();G.placesType=E;G.targetType=E;G.parentNode=D;J.plug(B.Bewype.LayoutDesignerPlaces,G);J.plug(B.Bewype.LayoutDesignerTarget,G);this.refresh(I);},_onClickRemove:function(){var D=this.get("host"),F=this.get("parentNode"),C=D.layoutDesignerPlaces.get("placesType"),E=null;switch(C){case"horizontal":D.one("table").remove();break;case"vertical":D.one("ul").remove();break;}D.unplug(B.Bewype.LayoutDesignerTarget);D.unplug(B.Bewype.LayoutDesignerPlaces);if(F){D.remove(true);F.layoutDesignerTarget.refresh();}else{E=this.getAttrs();E.targetType="start";D.plug(B.Bewype.LayoutDesignerTarget,E);}},_onClickAction:function(E,C){switch(E){case"column":case"row":return this._addPlaces(E);case"text":case"image":var D=this.get("host"),F=D.layoutDesignerPlaces.getMaxWidth();D.layoutDesignerPlaces.addContent(E);return this.refresh(F);case"remove":return this._onClickRemove();default:break;}},_getTargetActions:function(){switch(this.get("targetType")){case"start":return this.get("targetStartActions");case"horizontal":return this.get("targetHorizontalActions");case"vertical":return this.get("targetVerticalActions");default:break;}},_addTargetAction:function(E,F){var D=this.get("designerClass")+"-target-action",C=E.one("div."+D+"-"+F);if(C){C.setStyle("display","block");}else{C=new B.Node.create('<div class="'+D+" "+D+"-"+F+'" />');E.append(C);B.on("click",B.bind(this._onClickAction,this,F),C);}},refresh:function(D){var C=this.get("host"),E=this.get("parentNode")||C;if(C.layoutDesignerPlaces){C.layoutDesignerPlaces.refresh(D);}else{return;}if(E.layoutDesignerTarget&&E!=C&&!D){E.layoutDesignerTarget.refresh();}}});B.namespace("Bewype");B.Bewype.LayoutDesignerTarget=A;},"@VERSION@",{requires:["bewype-layout-designer-places"]});