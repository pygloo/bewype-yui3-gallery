YUI.add("event-custom-complex",function(F){var B,E,D={},A=F.CustomEvent.prototype,C=F.EventTarget.prototype;F.EventFacade=function(H,G){H=H||D;this._event=H;this.details=H.details;this.type=H.type;this._type=H.type;this.target=H.target;this.currentTarget=G;this.relatedTarget=H.relatedTarget;};F.extend(F.EventFacade,Object,{stopPropagation:function(){this._event.stopPropagation();this.stopped=1;},stopImmediatePropagation:function(){this._event.stopImmediatePropagation();this.stopped=2;},preventDefault:function(){this._event.preventDefault();this.prevented=1;},halt:function(G){this._event.halt(G);this.prevented=1;this.stopped=(G)?2:1;}});A.fireComplex=function(O){var P=F.Env._eventstack,K,G,M,H,N,S,I,R=this,Q=R.host||R,L,J;if(P){if(R.queuable&&R.type!=P.next.type){R.log("queue "+R.type);P.queue.push([R,O]);return true;}}else{F.Env._eventstack={id:R.id,next:R,silent:R.silent,stopped:0,prevented:0,bubbling:null,type:R.type,afterQueue:new F.Queue(),defaultTargetOnly:R.defaultTargetOnly,queue:[]};P=F.Env._eventstack;}I=R.getSubs();R.stopped=(R.type!==P.type)?0:P.stopped;R.prevented=(R.type!==P.type)?0:P.prevented;R.target=R.target||Q;S=new F.EventTarget({fireOnce:true,context:Q});R.events=S;if(R.preventedFn){S.on("prevented",R.preventedFn);}if(R.stoppedFn){S.on("stopped",R.stoppedFn);}R.currentTarget=Q;R.details=O.slice();R.log("Firing "+R.type);R._facade=null;K=R._getFacade(O);if(F.Lang.isObject(O[0])){O[0]=K;}else{O.unshift(K);}if(I[0]){R._procSubs(I[0],O,K);}if(R.bubbles&&Q.bubble&&!R.stopped){J=P.bubbling;P.bubbling=R.type;if(P.type!=R.type){P.stopped=0;P.prevented=0;}N=Q.bubble(R);R.stopped=Math.max(R.stopped,P.stopped);R.prevented=Math.max(R.prevented,P.prevented);P.bubbling=J;}if(R.defaultFn&&!R.prevented&&((!R.defaultTargetOnly&&!P.defaultTargetOnly)||Q===K.target)){R.defaultFn.apply(Q,O);}R._broadcast(O);if(I[1]&&!R.prevented&&R.stopped<2){if(P.id===R.id||R.type!=Q._yuievt.bubbling){R._procSubs(I[1],O,K);while((L=P.afterQueue.last())){L();}}else{P.afterQueue.add(function(){R._procSubs(I[1],O,K);});}}R.target=null;if(P.id===R.id){M=P.queue;while(M.length){G=M.pop();H=G[0];P.next=H;H.fire.apply(H,G[1]);}F.Env._eventstack=null;}N=!(R.stopped);if(R.type!=Q._yuievt.bubbling){P.stopped=0;P.prevented=0;R.stopped=0;R.prevented=0;}return N;};A._getFacade=function(){var G=this._facade,J,I,H=this.details;if(!G){G=new F.EventFacade(this,this.currentTarget);}J=H&&H[0];if(F.Lang.isObject(J,true)){I={};F.mix(I,G,true,E);F.mix(G,J,true);F.mix(G,I,true,E);G.type=J.type||G.type;}G.details=this.details;G.target=this.originalTarget||this.target;G.currentTarget=this.currentTarget;G.stopped=0;G.prevented=0;this._facade=G;return this._facade;};A.stopPropagation=function(){this.stopped=1;F.Env._eventstack.stopped=1;this.events.fire("stopped",this);};A.stopImmediatePropagation=function(){this.stopped=2;F.Env._eventstack.stopped=2;this.events.fire("stopped",this);};A.preventDefault=function(){if(this.preventable){this.prevented=1;F.Env._eventstack.prevented=1;this.events.fire("prevented",this);}};A.halt=function(G){if(G){this.stopImmediatePropagation();}else{this.stopPropagation();}this.preventDefault();};C.addTarget=function(G){this._yuievt.targets[F.stamp(G)]=G;this._yuievt.hasTargets=true;};C.getTargets=function(){return F.Object.values(this._yuievt.targets);};C.removeTarget=function(G){delete this._yuievt.targets[F.stamp(G)];};C.bubble=function(S,P,N){var L=this._yuievt.targets,O=true,T,Q=S&&S.type,H,K,M,I,G=N||(S&&S.target)||this,R=F.Env._eventstack,J;if(!S||((!S.stopped)&&L)){for(K in L){if(L.hasOwnProperty(K)){T=L[K];H=T.getEvent(Q,true);I=T.getSibling(Q,H);if(I&&!H){H=T.publish(Q);}J=T._yuievt.bubbling;T._yuievt.bubbling=Q;if(!H){if(T._yuievt.hasTargets){T.bubble(S,P,G);}}else{H.sibling=I;H.target=G;H.originalTarget=G;H.currentTarget=T;M=H.broadcast;H.broadcast=false;H.emitFacade=true;O=O&&H.fire.apply(H,P||S.details||[]);H.broadcast=M;H.originalTarget=null;if(H.stopped){break;}}T._yuievt.bubbling=J;}}}return O;};B=new F.EventFacade();E=F.Object.keys(B);},"@VERSION@",{requires:["event-custom-base"]});