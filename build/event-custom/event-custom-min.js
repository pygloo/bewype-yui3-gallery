YUI.add("event-custom-base",function(B){B.Env.evt={handles:{},plugins:{}};var G=0,I=1;B.Do={objs:{},before:function(R,T,U,V){var S=R,L;if(V){L=[R,V].concat(B.Array(arguments,4,true));S=B.rbind.apply(B,L);}return this._inject(G,S,T,U);},after:function(R,T,U,V){var S=R,L;if(V){L=[R,V].concat(B.Array(arguments,4,true));S=B.rbind.apply(B,L);}return this._inject(I,S,T,U);},_inject:function(L,S,T,V){var W=B.stamp(T),U,R;if(!this.objs[W]){this.objs[W]={};}U=this.objs[W];if(!U[V]){U[V]=new B.Do.Method(T,V);T[V]=function(){return U[V].exec.apply(U[V],arguments);};}R=W+B.stamp(S)+V;U[V].register(R,S,L);return new B.EventHandle(U[V],R);},detach:function(L){if(L.detach){L.detach();}},_unload:function(R,L){}};B.Do.Method=function(L,R){this.obj=L;this.methodName=R;this.method=L[R];this.before={};this.after={};};B.Do.Method.prototype.register=function(R,S,L){if(L){this.after[R]=S;}else{this.before[R]=S;}};B.Do.Method.prototype._delete=function(L){delete this.before[L];delete this.after[L];};B.Do.Method.prototype.exec=function(){var S=B.Array(arguments,0,true),T,R,W,U=this.before,L=this.after,V=false;for(T in U){if(U.hasOwnProperty(T)){R=U[T].apply(this.obj,S);if(R){switch(R.constructor){case B.Do.Halt:return R.retVal;case B.Do.AlterArgs:S=R.newArgs;break;case B.Do.Prevent:V=true;break;default:}}}}if(!V){R=this.method.apply(this.obj,S);}for(T in L){if(L.hasOwnProperty(T)){W=L[T].apply(this.obj,S);if(W&&W.constructor==B.Do.Halt){return W.retVal;}else{if(W&&W.constructor==B.Do.AlterReturn){R=W.newRetVal;}}}}return R;};B.Do.AlterArgs=function(R,L){this.msg=R;this.newArgs=L;};B.Do.AlterReturn=function(R,L){this.msg=R;this.newRetVal=L;};B.Do.Halt=function(R,L){this.msg=R;this.retVal=L;};B.Do.Prevent=function(L){this.msg=L;};B.Do.Error=B.Do.Halt;var N="after",Q=["broadcast","monitored","bubbles","context","contextFn","currentTarget","defaultFn","defaultTargetOnly","details","emitFacade","fireOnce","async","host","preventable","preventedFn","queuable","silent","stoppedFn","target","type"],O=9,A="yui:log";B.EventHandle=function(L,R){this.evt=L;this.sub=R;};B.EventHandle.prototype={batch:function(L,R){L.call(R||this,this);if(B.Lang.isArray(this.evt)){B.Array.each(this.evt,function(S){S.batch.call(R||S,L);});}},detach:function(){var L=this.evt,S=0,R;if(L){if(B.Lang.isArray(L)){for(R=0;R<L.length;R++){S+=L[R].detach();}}else{L._delete(this.sub);S=1;}}return S;},monitor:function(L){return this.evt.monitor.apply(this.evt,arguments);}};B.CustomEvent=function(L,R){R=R||{};this.id=B.stamp(this);this.type=L;this.context=B;this.logSystem=(L==A);this.silent=this.logSystem;this.subscribers={};this.afters={};this.preventable=true;this.bubbles=true;this.signature=O;this.subCount=0;this.afterCount=0;this.applyConfig(R,true);};B.CustomEvent.prototype={hasSubs:function(L){var T=this.subCount,R=this.afterCount,S=this.sibling;if(S){T+=S.subCount;R+=S.afterCount;}if(L){return(L=="after")?R:T;}return(T+R);},monitor:function(S){this.monitored=true;var R=this.id+"|"+this.type+"_"+S,L=B.Array(arguments,0,true);L[0]=R;return this.host.on.apply(this.host,L);},getSubs:function(){var S=B.merge(this.subscribers),L=B.merge(this.afters),R=this.sibling;if(R){B.mix(S,R.subscribers);B.mix(L,R.afters);}return[S,L];},applyConfig:function(R,L){if(R){B.mix(this,R,L,Q);}},_on:function(U,S,R,L){if(!U){this.log("Invalid callback for CE: "+this.type);}var T=new B.Subscriber(U,S,R,L);if(this.fireOnce&&this.fired){if(this.async){setTimeout(B.bind(this._notify,this,T,this.firedWith),0);}else{this._notify(T,this.firedWith);}}if(L==N){this.afters[T.id]=T;this.afterCount++;}else{this.subscribers[T.id]=T;this.subCount++;}return new B.EventHandle(this,T);},subscribe:function(S,R){var L=(arguments.length>2)?B.Array(arguments,2,true):null;return this._on(S,R,L,true);},on:function(S,R){var L=(arguments.length>2)?B.Array(arguments,2,true):null;if(this.host){this.host._monitor("attach",this.type,{args:arguments});}return this._on(S,R,L,true);},after:function(S,R){var L=(arguments.length>2)?B.Array(arguments,2,true):null;return this._on(S,R,L,N);},detach:function(U,S){if(U&&U.detach){return U.detach();}var R,T,V=0,L=B.merge(this.subscribers,this.afters);for(R in L){if(L.hasOwnProperty(R)){T=L[R];if(T&&(!U||U===T.fn)){this._delete(T);V++;}}}return V;},unsubscribe:function(){return this.detach.apply(this,arguments);},_notify:function(T,S,L){this.log(this.type+"->"+"sub: "+T.id);var R;R=T.notify(S,this);if(false===R||this.stopped>1){this.log(this.type+" cancelled by subscriber");return false;}return true;},log:function(R,L){if(!this.silent){}},fire:function(){if(this.fireOnce&&this.fired){this.log("fireOnce event: "+this.type+" already fired");return true;}else{var L=B.Array(arguments,0,true);this.fired=true;this.firedWith=L;if(this.emitFacade){return this.fireComplex(L);}else{return this.fireSimple(L);}}},fireSimple:function(L){this.stopped=0;this.prevented=0;if(this.hasSubs()){var R=this.getSubs();this._procSubs(R[0],L);this._procSubs(R[1],L);}this._broadcast(L);return this.stopped?false:true;},fireComplex:function(L){L[0]=L[0]||{};return this.fireSimple(L);},_procSubs:function(T,R,L){var U,S;for(S in T){if(T.hasOwnProperty(S)){U=T[S];if(U&&U.fn){if(false===this._notify(U,R,L)){this.stopped=2;}if(this.stopped==2){return false;}}}}return true;},_broadcast:function(R){if(!this.stopped&&this.broadcast){var L=B.Array(R);L.unshift(this.type);if(this.host!==B){B.fire.apply(B,L);}if(this.broadcast==2){B.Global.fire.apply(B.Global,L);}}},unsubscribeAll:function(){return this.detachAll.apply(this,arguments);},detachAll:function(){return this.detach();},_delete:function(L){if(L){if(this.subscribers[L.id]){delete this.subscribers[L.id];this.subCount--;}if(this.afters[L.id]){delete this.afters[L.id];this.afterCount--;}}if(this.host){this.host._monitor("detach",this.type,{ce:this,sub:L});}if(L){delete L.fn;delete L.context;}}};B.Subscriber=function(S,R,L){this.fn=S;this.context=R;this.id=B.stamp(this);this.args=L;};B.Subscriber.prototype={_notify:function(U,S,T){var L=this.args,R;
switch(T.signature){case 0:R=this.fn.call(U,T.type,S,U);break;case 1:R=this.fn.call(U,S[0]||null,U);break;default:if(L||S){S=S||[];L=(L)?S.concat(L):S;R=this.fn.apply(U,L);}else{R=this.fn.call(U);}}if(this.once){T._delete(this);}return R;},notify:function(R,T){var U=this.context,L=true;if(!U){U=(T.contextFn)?T.contextFn():T.context;}if(B.config.throwFail){L=this._notify(U,R,T);}else{try{L=this._notify(U,R,T);}catch(S){B.error(this+" failed: "+S.message,S);}}return L;},contains:function(R,L){if(L){return((this.fn==R)&&this.context==L);}else{return(this.fn==R);}}};var J=B.Lang,H=":",E="|",M="~AFTER~",K=B.Array,C=B.cached(function(L){return L.replace(/(.*)(:)(.*)/,"*$2$3");}),P=B.cached(function(L,R){if(!R||!J.isString(L)||L.indexOf(H)>-1){return L;}return R+H+L;}),F=B.cached(function(S,U){var R=S,T,V,L;if(!J.isString(R)){return R;}L=R.indexOf(M);if(L>-1){V=true;R=R.substr(M.length);}L=R.indexOf(E);if(L>-1){T=R.substr(0,(L));R=R.substr(L+1);if(R=="*"){R=null;}}return[T,(U)?P(R,U):R,V,R];}),D=function(L){var R=(J.isObject(L))?L:{};this._yuievt=this._yuievt||{id:B.guid(),events:{},targets:{},config:R,chain:("chain" in R)?R.chain:B.config.chain,bubbling:false,defaults:{context:R.context||this,host:this,emitFacade:R.emitFacade,fireOnce:R.fireOnce,queuable:R.queuable,monitored:R.monitored,broadcast:R.broadcast,defaultTargetOnly:R.defaultTargetOnly,bubbles:("bubbles" in R)?R.bubbles:true}};};D.prototype={once:function(){var L=this.on.apply(this,arguments);L.batch(function(R){if(R.sub){R.sub.once=true;}});return L;},on:function(U,Z,S){var d=F(U,this._yuievt.config.prefix),g,h,R,k,b,a,i,W=B.Env.evt.handles,T,L,X,j=B.Node,e,Y,V;this._monitor("attach",d[1],{args:arguments,category:d[0],after:d[2]});if(J.isObject(U)){if(J.isFunction(U)){return B.Do.before.apply(B.Do,arguments);}g=Z;h=S;R=K(arguments,0,true);k=[];if(J.isArray(U)){V=true;}T=U._after;delete U._after;B.each(U,function(l,f){if(J.isObject(l)){g=l.fn||((J.isFunction(l))?l:g);h=l.context||h;}var c=(T)?M:"";R[0]=c+((V)?l:f);R[1]=g;R[2]=h;k.push(this.on.apply(this,R));},this);return(this._yuievt.chain)?this:new B.EventHandle(k);}a=d[0];T=d[2];X=d[3];if(j&&B.instanceOf(this,j)&&(X in j.DOM_EVENTS)){R=K(arguments,0,true);R.splice(2,0,j.getDOMNode(this));return B.on.apply(B,R);}U=d[1];if(B.instanceOf(this,YUI)){L=B.Env.evt.plugins[U];R=K(arguments,0,true);R[0]=X;if(j){e=R[2];if(B.instanceOf(e,B.NodeList)){e=B.NodeList.getDOMNodes(e);}else{if(B.instanceOf(e,j)){e=j.getDOMNode(e);}}Y=(X in j.DOM_EVENTS);if(Y){R[2]=e;}}if(L){i=L.on.apply(B,R);}else{if((!U)||Y){i=B.Event._attach(R);}}}if(!i){b=this._yuievt.events[U]||this.publish(U);i=b._on(Z,S,(arguments.length>3)?K(arguments,3,true):null,(T)?"after":true);}if(a){W[a]=W[a]||{};W[a][U]=W[a][U]||[];W[a][U].push(i);}return(this._yuievt.chain)?this:i;},subscribe:function(){return this.on.apply(this,arguments);},detach:function(Z,b,L){var f=this._yuievt.events,U,W=B.Node,d=W&&(B.instanceOf(this,W));if(!Z&&(this!==B)){for(U in f){if(f.hasOwnProperty(U)){f[U].detach(b,L);}}if(d){B.Event.purgeElement(W.getDOMNode(this));}return this;}var T=F(Z,this._yuievt.config.prefix),Y=J.isArray(T)?T[0]:null,g=(T)?T[3]:null,V,c=B.Env.evt.handles,e,a,X,S,R=function(m,k,l){var j=m[k],n,h;if(j){for(h=j.length-1;h>=0;--h){n=j[h].evt;if(n.host===l||n.el===l){j[h].detach();}}}};if(Y){a=c[Y];Z=T[1];e=(d)?B.Node.getDOMNode(this):this;if(a){if(Z){R(a,Z,e);}else{for(U in a){if(a.hasOwnProperty(U)){R(a,U,e);}}}return this;}}else{if(J.isObject(Z)&&Z.detach){Z.detach();return this;}else{if(d&&((!g)||(g in W.DOM_EVENTS))){X=K(arguments,0,true);X[2]=W.getDOMNode(this);B.detach.apply(B,X);return this;}}}V=B.Env.evt.plugins[g];if(B.instanceOf(this,YUI)){X=K(arguments,0,true);if(V&&V.detach){V.detach.apply(B,X);return this;}else{if(!Z||(!V&&W&&(Z in W.DOM_EVENTS))){X[0]=Z;B.Event.detach.apply(B.Event,X);return this;}}}S=f[T[1]];if(S){S.detach(b,L);}return this;},unsubscribe:function(){return this.detach.apply(this,arguments);},detachAll:function(L){return this.detach(L);},unsubscribeAll:function(){return this.detachAll.apply(this,arguments);},publish:function(S,T){var R,X,L,W,V=this._yuievt,U=V.config.prefix;S=(U)?P(S,U):S;this._monitor("publish",S,{args:arguments});if(J.isObject(S)){L={};B.each(S,function(Z,Y){L[Y]=this.publish(Y,Z||T);},this);return L;}R=V.events;X=R[S];if(X){if(T){X.applyConfig(T,true);}}else{W=V.defaults;X=new B.CustomEvent(S,(T)?B.merge(W,T):W);R[S]=X;}return R[S];},_monitor:function(T,L,U){var R,S=this.getEvent(L);if((this._yuievt.config.monitored&&(!S||S.monitored))||(S&&S.monitored)){R=L+"_"+T;U.monitored=T;this.fire.call(this,R,U);}},fire:function(T){var X=J.isString(T),S=(X)?T:(T&&T.type),W,R,V=this._yuievt.config.prefix,U,L=(X)?K(arguments,1,true):arguments;S=(V)?P(S,V):S;this._monitor("fire",S,{args:L});W=this.getEvent(S,true);U=this.getSibling(S,W);if(U&&!W){W=this.publish(S);}if(!W){if(this._yuievt.hasTargets){return this.bubble({type:S},L,this);}R=true;}else{W.sibling=U;R=W.fire.apply(W,L);}return(this._yuievt.chain)?this:R;},getSibling:function(L,S){var R;if(L.indexOf(H)>-1){L=C(L);R=this.getEvent(L,true);if(R){R.applyConfig(S);R.bubbles=false;R.broadcast=0;}}return R;},getEvent:function(R,L){var T,S;if(!L){T=this._yuievt.config.prefix;R=(T)?P(R,T):R;}S=this._yuievt.events;return S[R]||null;},after:function(S,R){var L=K(arguments,0,true);switch(J.type(S)){case"function":return B.Do.after.apply(B.Do,arguments);case"array":case"object":L[0]._after=true;break;default:L[0]=M+S;}return this.on.apply(this,L);},before:function(){return this.on.apply(this,arguments);}};B.EventTarget=D;B.mix(B,D.prototype,false,false,{bubbles:false});D.call(B);YUI.Env.globalEvents=YUI.Env.globalEvents||new D();B.Global=YUI.Env.globalEvents;},"@VERSION@",{requires:["oop"]});YUI.add("event-custom-complex",function(F){var B,E,D={},A=F.CustomEvent.prototype,C=F.EventTarget.prototype;F.EventFacade=function(H,G){H=H||D;this._event=H;this.details=H.details;this.type=H.type;this._type=H.type;this.target=H.target;this.currentTarget=G;this.relatedTarget=H.relatedTarget;
};F.extend(F.EventFacade,Object,{stopPropagation:function(){this._event.stopPropagation();this.stopped=1;},stopImmediatePropagation:function(){this._event.stopImmediatePropagation();this.stopped=2;},preventDefault:function(){this._event.preventDefault();this.prevented=1;},halt:function(G){this._event.halt(G);this.prevented=1;this.stopped=(G)?2:1;}});A.fireComplex=function(O){var P=F.Env._eventstack,K,G,M,H,N,S,I,R=this,Q=R.host||R,L,J;if(P){if(R.queuable&&R.type!=P.next.type){R.log("queue "+R.type);P.queue.push([R,O]);return true;}}else{F.Env._eventstack={id:R.id,next:R,silent:R.silent,stopped:0,prevented:0,bubbling:null,type:R.type,afterQueue:new F.Queue(),defaultTargetOnly:R.defaultTargetOnly,queue:[]};P=F.Env._eventstack;}I=R.getSubs();R.stopped=(R.type!==P.type)?0:P.stopped;R.prevented=(R.type!==P.type)?0:P.prevented;R.target=R.target||Q;S=new F.EventTarget({fireOnce:true,context:Q});R.events=S;if(R.preventedFn){S.on("prevented",R.preventedFn);}if(R.stoppedFn){S.on("stopped",R.stoppedFn);}R.currentTarget=Q;R.details=O.slice();R.log("Firing "+R.type);R._facade=null;K=R._getFacade(O);if(F.Lang.isObject(O[0])){O[0]=K;}else{O.unshift(K);}if(I[0]){R._procSubs(I[0],O,K);}if(R.bubbles&&Q.bubble&&!R.stopped){J=P.bubbling;P.bubbling=R.type;if(P.type!=R.type){P.stopped=0;P.prevented=0;}N=Q.bubble(R);R.stopped=Math.max(R.stopped,P.stopped);R.prevented=Math.max(R.prevented,P.prevented);P.bubbling=J;}if(R.defaultFn&&!R.prevented&&((!R.defaultTargetOnly&&!P.defaultTargetOnly)||Q===K.target)){R.defaultFn.apply(Q,O);}R._broadcast(O);if(I[1]&&!R.prevented&&R.stopped<2){if(P.id===R.id||R.type!=Q._yuievt.bubbling){R._procSubs(I[1],O,K);while((L=P.afterQueue.last())){L();}}else{P.afterQueue.add(function(){R._procSubs(I[1],O,K);});}}R.target=null;if(P.id===R.id){M=P.queue;while(M.length){G=M.pop();H=G[0];P.next=H;H.fire.apply(H,G[1]);}F.Env._eventstack=null;}N=!(R.stopped);if(R.type!=Q._yuievt.bubbling){P.stopped=0;P.prevented=0;R.stopped=0;R.prevented=0;}return N;};A._getFacade=function(){var G=this._facade,J,I,H=this.details;if(!G){G=new F.EventFacade(this,this.currentTarget);}J=H&&H[0];if(F.Lang.isObject(J,true)){I={};F.mix(I,G,true,E);F.mix(G,J,true);F.mix(G,I,true,E);G.type=J.type||G.type;}G.details=this.details;G.target=this.originalTarget||this.target;G.currentTarget=this.currentTarget;G.stopped=0;G.prevented=0;this._facade=G;return this._facade;};A.stopPropagation=function(){this.stopped=1;F.Env._eventstack.stopped=1;this.events.fire("stopped",this);};A.stopImmediatePropagation=function(){this.stopped=2;F.Env._eventstack.stopped=2;this.events.fire("stopped",this);};A.preventDefault=function(){if(this.preventable){this.prevented=1;F.Env._eventstack.prevented=1;this.events.fire("prevented",this);}};A.halt=function(G){if(G){this.stopImmediatePropagation();}else{this.stopPropagation();}this.preventDefault();};C.addTarget=function(G){this._yuievt.targets[F.stamp(G)]=G;this._yuievt.hasTargets=true;};C.getTargets=function(){return F.Object.values(this._yuievt.targets);};C.removeTarget=function(G){delete this._yuievt.targets[F.stamp(G)];};C.bubble=function(S,P,N){var L=this._yuievt.targets,O=true,T,Q=S&&S.type,H,K,M,I,G=N||(S&&S.target)||this,R=F.Env._eventstack,J;if(!S||((!S.stopped)&&L)){for(K in L){if(L.hasOwnProperty(K)){T=L[K];H=T.getEvent(Q,true);I=T.getSibling(Q,H);if(I&&!H){H=T.publish(Q);}J=T._yuievt.bubbling;T._yuievt.bubbling=Q;if(!H){if(T._yuievt.hasTargets){T.bubble(S,P,G);}}else{H.sibling=I;H.target=G;H.originalTarget=G;H.currentTarget=T;M=H.broadcast;H.broadcast=false;H.emitFacade=true;O=O&&H.fire.apply(H,P||S.details||[]);H.broadcast=M;H.originalTarget=null;if(H.stopped){break;}}T._yuievt.bubbling=J;}}}return O;};B=new F.EventFacade();E=F.Object.keys(B);},"@VERSION@",{requires:["event-custom-base"]});YUI.add("event-custom",function(A){},"@VERSION@",{use:["event-custom-base","event-custom-complex"]});