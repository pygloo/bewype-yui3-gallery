YUI.add("frame",function(D){var A=function(){A.superclass.constructor.apply(this,arguments);},C=":last-child",B="body";D.extend(A,D.Base,{_ready:null,_rendered:null,_iframe:null,_instance:null,_create:function(E){var K,J,G,I;this._iframe=D.Node.create(A.HTML);this._iframe.setStyle("visibility","hidden");this._iframe.set("src",this.get("src"));this.get("container").append(this._iframe);this._iframe.set("height","99%");var F="",H=((this.get("extracss"))?'<style id="extra_css">'+this.get("extracss")+"</style>":"");F=D.substitute(A.PAGE_HTML,{DIR:this.get("dir"),LANG:this.get("lang"),TITLE:this.get("title"),META:A.META,LINKED_CSS:this.get("linkedcss"),CONTENT:this.get("content"),BASE_HREF:this.get("basehref"),DEFAULT_CSS:A.DEFAULT_CSS,EXTRA_CSS:H});if(D.config.doc.compatMode!="BackCompat"){F=A.getDocType()+"\n"+F;}else{}G=this._resolveWinDoc();G.doc.open();G.doc.write(F);G.doc.close();if(!G.doc.documentElement){var L=D.later(1,this,function(){if(G.doc&&G.doc.documentElement){E(G);L.cancel();}},null,true);}else{E(G);}},_resolveWinDoc:function(F){var E=(F)?F:{};E.win=D.Node.getDOMNode(this._iframe.get("contentWindow"));E.doc=D.Node.getDOMNode(this._iframe.get("contentWindow.document"));if(!E.doc){E.doc=D.config.doc;}if(!E.win){E.win=D.config.win;}return E;},_onDomEvent:function(G){var F,E;G.frameX=G.frameY=0;if(G.pageX>0||G.pageY>0){if(G.type.substring(0,3)!=="key"){E=this._instance.one("win");F=this._iframe.getXY();G.frameX=F[0]+G.pageX-E.get("scrollLeft");G.frameY=F[1]+G.pageY-E.get("scrollTop");}}G.frameTarget=G.target;G.frameCurrentTarget=G.currentTarget;G.frameEvent=G;this.fire("dom:"+G.type,G);},initializer:function(){this.publish("ready",{emitFacade:true,defaultFn:this._defReadyFn});},destructor:function(){var E=this.getInstance();E.one("doc").detachAll();E=null;this._iframe.remove();},_DOMPaste:function(H){var F=this.getInstance(),E="",G=F.config.win;if(H._event.originalTarget){E=H._event.originalTarget;}if(H._event.clipboardData){E=H._event.clipboardData.getData("Text");}if(G.clipboardData){E=G.clipboardData.getData("Text");if(E===""){if(!G.clipboardData.setData("Text",E)){E=null;}}}H.frameTarget=H.target;H.frameCurrentTarget=H.currentTarget;H.frameEvent=H;if(E){H.clipboardData={data:E,getData:function(){return E;}};}else{H.clipboardData=null;}this.fire("dom:paste",H);},_defReadyFn:function(){var E=this.getInstance();D.each(A.DOM_EVENTS,function(G,F){var H=D.bind(this._onDomEvent,this),I=((D.UA.ie)?D.throttle(H,200):H);if(!E.Node.DOM_EVENTS[F]){E.Node.DOM_EVENTS[F]=1;}if(G===1){if(F!=="focus"&&F!=="blur"&&F!=="paste"){if(F.substring(0,3)==="key"){E.on(F,I,E.config.doc);}else{E.on(F,H,E.config.doc);}}}},this);E.Node.DOM_EVENTS.paste=1;E.on("paste",D.bind(this._DOMPaste,this),E.one("body"));E.on("focus",D.bind(this._onDomEvent,this),E.config.win);E.on("blur",D.bind(this._onDomEvent,this),E.config.win);E._use=E.use;E.use=D.bind(this.use,this);this._iframe.setStyles({visibility:"inherit"});E.one("body").setStyle("display","block");if(D.UA.ie){this._fixIECursors();}},_fixIECursors:function(){var H=this.getInstance(),F=H.all("table"),G=H.all("br"),E;if(F.size()&&G.size()){E=F.item(0).get("sourceIndex");G.each(function(L){var J=L.get("parentNode"),K=J.get("children"),I=J.all(">br");if(J.test("div")){if(K.size()>2){L.replace(H.Node.create("<wbr>"));}else{if(L.get("sourceIndex")>E){if(I.size()){L.replace(H.Node.create("<wbr>"));}}else{if(I.size()>1){L.replace(H.Node.create("<wbr>"));}}}}});}},_onContentReady:function(G){if(!this._ready){this._ready=true;var F=this.getInstance(),E=D.clone(this.get("use"));this.fire("contentready");if(G){F.config.doc=D.Node.getDOMNode(G.target);}E.push(D.bind(function(){if(F.Selection){F.Selection.DEFAULT_BLOCK_TAG=this.get("defaultblock");}if(this.get("designMode")){if(D.UA.ie){F.config.doc.body.contentEditable="true";this._ieSetBodyHeight();F.on("keyup",D.bind(this._ieSetBodyHeight,this),F.config.doc);}else{F.config.doc.designMode="on";}}this.fire("ready");},this));F.use.apply(F,E);F.one("doc").get("documentElement").addClass("yui-js-enabled");}},_ieHeightCounter:null,_ieSetBodyHeight:function(I){if(!this._ieHeightCounter){this._ieHeightCounter=0;}this._ieHeightCounter++;var H=false;if(!I){H=true;}if(I){switch(I.keyCode){case 8:case 13:H=true;break;}if(I.ctrlKey||I.shiftKey){H=true;}}if(H){try{var G=this.getInstance();var F=this._iframe.get("offsetHeight");var E=G.config.doc.body.scrollHeight;if(F>E){F=(F-15)+"px";G.config.doc.body.style.height=F;}else{G.config.doc.body.style.height="auto";}}catch(I){if(this._ieHeightCounter<100){D.later(200,this,this._ieSetBodyHeight);}else{}}}},_resolveBaseHref:function(E){if(!E||E===""){E=D.config.doc.location.href;if(E.indexOf("?")!==-1){E=E.substring(0,E.indexOf("?"));}E=E.substring(0,E.lastIndexOf("/"))+"/";}return E;},_getHTML:function(E){if(this._ready){var F=this.getInstance();E=F.one("body").get("innerHTML");}return E;},_setHTML:function(E){if(this._ready){var F=this.getInstance();F.one("body").set("innerHTML",E);}else{this.on("contentready",D.bind(function(G,I){var H=this.getInstance();H.one("body").set("innerHTML",G);},this,E));}return E;},_getLinkedCSS:function(E){if(!D.Lang.isArray(E)){E=[E];}var F="";if(!this._ready){D.each(E,function(G){if(G!==""){F+='<link rel="stylesheet" href="'+G+'" type="text/css">';}});}else{F=E;}return F;},_setLinkedCSS:function(E){if(this._ready){var F=this.getInstance();F.Get.css(E);}return E;},_setExtraCSS:function(E){if(this._ready){var G=this.getInstance(),F=G.one("#extra_css");F.remove();G.one("head").append('<style id="extra_css">'+E+"</style>");}return E;},_instanceLoaded:function(F){this._instance=F;this._onContentReady();var G=this._instance.config.doc;if(this.get("designMode")){if(!D.UA.ie){try{G.execCommand("styleWithCSS",false,false);G.execCommand("insertbronreturn",false,false);}catch(E){}}}},use:function(){var G=this.getInstance(),F=D.Array(arguments),E=false;if(D.Lang.isFunction(F[F.length-1])){E=F.pop();}if(E){F.push(function(){E.apply(G,arguments);});}G._use.apply(G,F);},delegate:function(G,F,E,I){var H=this.getInstance();
if(!H){return false;}if(!I){I=E;E="body";}return H.delegate(G,F,E,I);},getInstance:function(){return this._instance;},render:function(E){if(this._rendered){return this;}this._rendered=true;if(E){this.set("container",E);}this._create(D.bind(function(I){var K,L,F=D.bind(function(M){this._instanceLoaded(M);},this),H=D.clone(this.get("use")),G={debug:false,win:I.win,doc:I.doc},J=D.bind(function(){G=this._resolveWinDoc(G);K=YUI(G);try{K.use("node-base",F);if(L){clearInterval(L);}}catch(M){L=setInterval(function(){J();},350);}},this);H.push(J);D.use.apply(D,H);},this));return this;},_handleFocus:function(){var H=this.getInstance(),G=new H.Selection();if(G.anchorNode){var J=G.anchorNode,I;if(J.test("p")&&J.get("innerHTML")===""){J=J.get("parentNode");}I=J.get("childNodes");if(I.size()){if(I.item(0).test("br")){G.selectNode(J,true,false);}else{if(I.item(0).test("p")){J=I.item(0).one("br.yui-cursor");if(J){J=J.get("parentNode");}if(!J){J=I.item(0).get("firstChild");}if(!J){J=I.item(0);}if(J){G.selectNode(J,true,false);}}else{var E=H.one("br.yui-cursor");if(E){var F=E.get("parentNode");if(F){G.selectNode(F,true,false);}}}}}}},focus:function(E){if(D.UA.ie){try{D.one("win").focus();this.getInstance().one("win").focus();}catch(G){}if(E===true){this._handleFocus();}if(D.Lang.isFunction(E)){E();}}else{try{D.one("win").focus();D.later(100,this,function(){this.getInstance().one("win").focus();if(E===true){this._handleFocus();}if(D.Lang.isFunction(E)){E();}});}catch(F){}}return this;},show:function(){this._iframe.setStyles({position:"static",left:""});if(D.UA.gecko){try{this._instance.config.doc.designMode="on";}catch(E){}this.focus();}return this;},hide:function(){this._iframe.setStyles({position:"absolute",left:"-999999px"});return this;}},{DOM_EVENTS:{dblclick:1,click:1,paste:1,mouseup:1,mousedown:1,keyup:1,keydown:1,keypress:1,activate:1,deactivate:1,beforedeactivate:1,focusin:1,focusout:1},DEFAULT_CSS:"body { background-color: #fff; font: 13px/1.22 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small; } a, a:visited, a:hover { color: blue !important; text-decoration: underline !important; cursor: text !important; } img { cursor: pointer !important; border: none; }",HTML:'<iframe border="0" frameBorder="0" marginWidth="0" marginHeight="0" leftMargin="0" topMargin="0" allowTransparency="true" width="100%" height="99%"></iframe>',PAGE_HTML:'<html dir="{DIR}" lang="{LANG}"><head><title>{TITLE}</title>{META}<base href="{BASE_HREF}"/>{LINKED_CSS}<style id="editor_css">{DEFAULT_CSS}</style>{EXTRA_CSS}</head><body>{CONTENT}</body></html>',getDocType:function(){var E=D.config.doc.doctype,F=A.DOC_TYPE;if(E){F="<!DOCTYPE "+E.name+((E.publicId)?" "+E.publicId:"")+((E.systemId)?" "+E.systemId:"")+">";}else{if(D.config.doc.all){E=D.config.doc.all[0];if(E.nodeType){if(E.nodeType===8){if(E.nodeValue){if(E.nodeValue.toLowerCase().indexOf("doctype")!==-1){F="<!"+E.nodeValue+">";}}}}}}return F;},DOC_TYPE:'<!DOCTYPE HTML PUBLIC "-/'+"/W3C/"+"/DTD HTML 4.01/"+'/EN" "http:/'+'/www.w3.org/TR/html4/strict.dtd">',META:'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=7">',NAME:"frame",ATTRS:{title:{value:"Blank Page"},dir:{value:"ltr"},lang:{value:"en-US"},src:{value:"javascript"+((D.UA.ie)?":false":":")+";"},designMode:{writeOnce:true,value:false},content:{value:"<br>",setter:"_setHTML",getter:"_getHTML"},basehref:{value:false,getter:"_resolveBaseHref"},use:{writeOnce:true,value:["substitute","node","node-style","selector-css3"]},container:{value:"body",setter:function(E){return D.one(E);}},node:{readOnly:true,value:null,getter:function(){return this._iframe;}},id:{writeOnce:true,getter:function(E){if(!E){E="iframe-"+D.guid();}return E;}},linkedcss:{value:"",getter:"_getLinkedCSS",setter:"_setLinkedCSS"},extracss:{value:"",setter:"_setExtraCSS"},host:{value:false},defaultblock:{value:"p"}}});D.Frame=A;},"@VERSION@",{skinnable:false,requires:["base","node","selector-css3","substitute"]});