YUI.add("event-delegate",function(G){var D=G.Array,B=G.Lang,A=B.isString,F=G.Selector.test,C=G.Env.evt.handles;function E(Q,S,J,I){var O=D(arguments,0,true),P=A(J)?J:null,N=Q.split(/\|/),L,H,K,R,M;if(N.length>1){R=N.shift();Q=N.shift();}L=G.Node.DOM_EVENTS[Q];if(B.isObject(L)&&L.delegate){M=L.delegate.apply(L,arguments);}if(!M){if(!Q||!S||!J||!I){return;}H=(P)?G.Selector.query(P,null,true):J;if(!H&&A(J)){M=G.on("available",function(){G.mix(M,G.delegate.apply(G,O),true);},J);}if(!M&&H){O.splice(2,2,H);M=G.Event._attach(O,{facade:false});M.sub.filter=I;M.sub._notify=E.notifySub;}}if(M&&R){K=C[R]||(C[R]={});K=K[Q]||(K[Q]=[]);K.push(M);}return M;}E.notifySub=function(N,I,M){I=I.slice();if(this.args){I.push.apply(I,this.args);}var L=E._applyFilter(this.filter,I,M),K,J,H;if(L){L=D(L);K=I[0]=new G.DOMEventFacade(I[0],M.el,M);K.container=G.one(M.el);for(J=L.length-1;J>=0;--J){K.currentTarget=G.one(L[J]);H=this.fn.apply(this.context||K.currentTarget,I);if(H===false){break;}}return H;}};E.compileFilter=G.cached(function(H){return function(J,I){return F(J._node,H,I.currentTarget._node);};});E._applyFilter=function(K,J,N){var M=J[0],H=N.el,L=M.target||M.srcElement,I=[];if(L.nodeType===3){L=L.parentNode;}J.unshift(L);if(A(K)){while(L&&L!==H){if(F(L,K,H)){I.push(L);}L=L.parentNode;}}else{J[0]=G.one(L);J[1]=new G.DOMEventFacade(M,H,N);while(L&&L!==H){if(K.apply(J[0],J)){I.push(L);}L=L.parentNode;J[0]=G.one(L);}J[1]=M;}if(I.length<=1){I=I[0];}J.shift();return I;};G.delegate=G.Event.delegate=E;},"@VERSION@",{requires:["node-base"]});