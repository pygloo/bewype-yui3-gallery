YUI.add("datatable-scroll",function(b){var l=b.Do,m=b.Node,j=b.Lang,o=b.UA,c=b.StyleSheet,f=b.ClassNameManager.getClassName,n="datatable",a=f(n,"hd"),e=f(n,"bd"),k=f(n,"liner"),i=f(n,"scrollable"),h='<div class="'+a+'"></div>',d='<div class="'+e+'"></div>',g="<table></table>";function p(){p.superclass.constructor.apply(this,arguments);}b.mix(p,{NS:"scroll",NAME:"dataTableScroll",ATTRS:{width:{value:undefined},height:{value:undefined},scroll:{value:"y"},COLOR_COLUMNFILLER:{value:"#f2f2f2",validator:j.isString,setter:function(q){if(this._headerContainerNode){this._headerContainerNode.setStyle("backgroundColor",q);}}}}});b.extend(p,b.Plugin.Base,{_parentTableNode:null,_parentTheadNode:null,_parentTbodyNode:null,_parentMsgNode:null,_parentContainer:null,_bodyContainerNode:null,_headerContainerNode:null,initializer:function(q){var r=this.get("host");this._parentContainer=r.get("contentBox");this._parentContainer.addClass(i);this._setUpNodes();},_setUpNodes:function(){var q=this.get("host");this.afterHostMethod("_addTableNode",this._setUpParentTableNode);this.afterHostMethod("_addTheadNode",this._setUpParentTheadNode);this.afterHostMethod("_addTbodyNode",this._setUpParentTbodyNode);this.afterHostMethod("_addMessageNode",this._setUpParentMessageNode);this.afterHostMethod("renderUI",this.renderUI);this.afterHostMethod("syncUI",this.syncUI);if(this.get("scroll")!=="x"){this.afterHostMethod("_attachTheadThNode",this._attachTheadThNode);this.afterHostMethod("_attachTbodyTdNode",this._attachTbodyTdNode);}},_setUpParentTableNode:function(){this._parentTableNode=this.get("host")._tableNode;},_setUpParentTheadNode:function(){this._parentTheadNode=this.get("host")._theadNode;},_setUpParentTbodyNode:function(){this._parentTbodyNode=this.get("host")._tbodyNode;},_setUpParentMessageNode:function(){this._parentMsgNode=this.get("host")._msgNode;},renderUI:function(){this._createBodyContainer();this._createHeaderContainer();this._setContentBoxDimensions();},syncUI:function(){this._removeCaptionNode();this._syncWidths();this._syncScroll();},_removeCaptionNode:function(){this.get("host")._captionNode.remove();},_syncWidths:function(){var r=m.all("#"+this._parentContainer.get("id")+" .yui3-datatable-hd table thead th"),s=m.one("#"+this._parentContainer.get("id")+" .yui3-datatable-bd table .yui3-datatable-data").get("firstChild").get("children"),t,w,y,v,x,u,q=o.ie;for(t=0,w=r.size();t<w;t++){x=r.item(t).get("firstChild");u=s.item(t).get("firstChild");if(!q){y=x.get("clientWidth");v=s.item(t).get("clientWidth");}else{y=x.get("offsetWidth");v=s.item(t).get("offsetWidth");}if(y>v){u.setStyle("width",(y-20+"px"));}else{if(v>y){x.setStyle("width",(v-20+"px"));u.setStyle("width",(v-20+"px"));}}}},_attachTheadThNode:function(r){var q=r.column.get("width")||"auto";if(q!=="auto"){r.th.get("firstChild").setStyles({"width":q,"overflow":"hidden"});}return r;},_attachTbodyTdNode:function(r){var q=r.column.get("width")||"auto";if(q!=="auto"){r.td.get("firstChild").setStyles({"width":q,"overflow":"hidden"});}return r;},_createBodyContainer:function(){var r=m.create(d),q=b.bind("_onScroll",this);this._bodyContainerNode=r;this._setStylesForTbody();r.appendChild(this._parentTableNode);this._parentContainer.appendChild(r);r.on("scroll",q);},_createHeaderContainer:function(){var r=m.create(h),q=m.create(g);this._headerContainerNode=r;this._setStylesForThead();q.appendChild(this._parentTheadNode);r.appendChild(q);this._parentContainer.prepend(r);},_setStylesForTbody:function(){var r=this.get("scroll"),q=this.get("width")||"",t=this.get("height")||"",s=this._bodyContainerNode,u={"width":"","height":t};if(r==="x"){u["overflowY"]="hidden";u["width"]=q;}else{if(r==="y"){u["overflowX"]="hidden";}else{u["width"]=q;}}s.setStyles(u);return s;},_setStylesForThead:function(){var r=this.get("scroll"),q=this.get("width")||"",s=this._headerContainerNode;s.setStyles({"width":q,"overflow":"hidden"});},_setContentBoxDimensions:function(){if(this.get("scroll")==="y"||(!this.get("width"))){this._parentContainer.setStyle("width","auto");}},_onScroll:function(){this._headerContainerNode.set("scrollLeft",this._bodyContainerNode.get("scrollLeft"));},_syncScroll:function(){this._syncScrollX();this._syncScrollY();this._syncScrollOverhang();if(o.opera){this._headerContainerNode.set("scrollLeft",this._bodyContainerNode.get("scrollLeft"));if(!this.get("width")){document.body.style+="";}}},_syncScrollY:function(){var q=this._parentTbodyNode,s=this._bodyContainerNode,r;if(!this.get("width")){r=(s.get("scrollHeight")>s.get("clientHeight"))?(q.get("parentNode").get("clientWidth")+19)+"px":(q.get("parentNode").get("clientWidth")+2)+"px";this._parentContainer.setStyle("width",r);}},_syncScrollX:function(){var q=this._parentTbodyNode,s=this._bodyContainerNode,r;this._headerContainerNode.set("scrollLeft",this._bodyContainerNode.get("scrollLeft"));if(!this.get("height")&&(o.ie)){r=(s.get("scrollWidth")>s.get("offsetWidth"))?(q.get("parentNode").get("offsetHeight")+18)+"px":q.get("parentNode").get("offsetHeight")+"px";s.setStyle("height",r);}if(q.get("rows").length===0){this._parentMsgNode.get("parentNode").setStyle("width",this._parentTheadNode.get("parentNode").get("offsetWidth")+"px");}else{this._parentMsgNode.get("parentNode").setStyle("width","");}},_syncScrollOverhang:function(){var q=this._bodyContainerNode,r=1;if((q.get("scrollHeight")>q.get("clientHeight"))||(q.get("scrollWidth")>q.get("clientWidth"))){r=18;}this._setOverhangValue(r);if(o.ie!==0&&this.get("scroll")==="y"&&this._bodyContainerNode.get("scrollHeight")>this._bodyContainerNode.get("offsetHeight")){this._headerContainerNode.setStyle("width",this._parentContainer.get("width"));}},_setOverhangValue:function(r){var t=this.get("host"),v=t.get("columnset").get("definitions"),q=v.length,u=r+"px solid "+this.get("COLOR_COLUMNFILLER"),s=m.all("#"+this._parentContainer.get("id")+" ."+a+" table thead th");s.item(q-1).setStyle("borderRight",u);}});b.namespace("Plugin").DataTableScroll=p;},"@VERSION@",{requires:["plugin","datatable-base","stylesheet"]});
