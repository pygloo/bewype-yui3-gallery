YUI.add("bewype-button-picker",function(b){var a=function(c){a.superclass.constructor.apply(this,arguments);};a.PICKER_TMPL='<div class="{buttonClass}-host">';a.PICKER_TMPL+="</div>";a.NAME="buttonPicker";a.NS="buttonPicker";a.ATTRS={buttonClass:{value:"yui3-button-picker",writeOnce:true,validator:function(c){return b.Lang.isString(c);}},label:{value:null,writeOnce:true,validator:function(c){return b.Lang.isString(c);}},imageUrl:{value:null,writeOnce:true,validator:function(c){return b.Lang.isString(c);}},width:{value:80,writeOnce:true,validator:function(c){return b.Lang.isNumber(c);}},pickerObj:{value:null,writeOnce:true},pickerParams:{value:{},writeOnce:true},zIndex:{value:4,writeOnce:true,validator:function(c){return b.Lang.isNumber(c);}}};b.extend(a,b.Bewype.Button,{_picker:null,_previous:null,_value:null,initializer:function(c){this._init(c);this._picker=null;this._previous=null;this._value=null;},destructor:function(){this.hidePicker();this._destroyBase();},renderUI:function(){this._renderBaseUI();b.after("yui3-button-event|click",b.bind(this.hidePicker,this));},hidePicker:function(d){if(this._picker){var g=this.get("contentBox"),f=this.get("buttonClass"),e=this._picker.get("pickerClass"),c=g.one("."+f+"-host");if(d&&d.target.ancestor("."+e)){}else{this._picker.destroy();c.remove();delete (this._picker);}}if(d){d.stopPropagation();}},showPicker:function(){var f=this.get("contentBox"),d=this.get("buttonClass"),e=this.get("pickerObj"),g=this.get("pickerParams"),c=null;if(f&&e){c=new b.Node.create(b.substitute(a.PICKER_TMPL,{buttonClass:d}));f.append(c);this._picker=new e(g);this._picker.setValue(this._value);this._picker.render(c);this._picker.on("picker:onChange",b.bind(this._onPickerChange,this));}},_onClick:function(c){var e=this.get("contentBox"),d=this.get("pickerObj");if(e&&d){this.fire("button:onClick");if(this._picker){this.hidePicker();}else{this.showPicker();}}c.stopPropagation();},_onPickerChange:function(d){var c=this._picker?this._picker.getValue():null;if(c){this.setValue(c);this.hidePicker();this.fire("button:onChange");}},getPrevious:function(){return this._previous;},getValue:function(){return this._value;},setValue:function(c){this._previous=this._value;this._value=c;}});b.namespace("Bewype");b.Bewype.ButtonPicker=a;},"@VERSION@",{requires:["bewype-button-base","bewype-picker"]});