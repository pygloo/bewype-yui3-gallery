YUI.add("bewype-button-picker",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments);};A.PICKER_TMPL='<div class="{buttonClass}-host ';A.PICKER_TMPL+='{buttonClass}-host-{pickerPosition}">';A.PICKER_TMPL+="</div>";A.NAME="buttonPicker";A.NS="buttonPicker";A.ATTRS={buttonClass:{value:"yui3-button-picker",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},label:{value:null,writeOnce:true,validator:function(C){return B.Lang.isString(C);}},imageUrl:{value:null,writeOnce:true,validator:function(C){return B.Lang.isString(C);}},pickerObj:{value:null,writeOnce:true},pickerParams:{value:{},writeOnce:true},pickerPosition:{value:"left",writeOnce:true,validator:function(C){return B.Lang.isString(C);}},zIndex:{value:4,writeOnce:true,validator:function(C){return B.Lang.isNumber(C);}}};B.extend(A,B.Bewype.Button,{_picker:null,_previous:null,_value:null,initializer:function(C){this._init(C);this._picker=null;this._previous=null;this._value=null;},destructor:function(){this.hidePicker();this._destroyBase();},renderUI:function(){this._renderBaseUI();B.after("yui3-button-event|click",B.bind(this.hidePicker,this));},hidePicker:function(E){if(this._picker){var H=this.get("contentBox"),G=this.get("buttonClass"),F=this._picker.get("pickerClass"),D=this.get("pickerPosition"),C=H.one("."+G+"-host-"+D);if(E&&E.target.ancestor("."+F)){}else{this._picker.destroy();C.remove();delete (this._picker);}}if(E){E.stopPropagation();}},showPicker:function(){var G=this.get("contentBox"),E=this.get("buttonClass"),F=this.get("pickerObj"),H=this.get("pickerParams"),D=this.get("pickerPosition"),C=null;if(G&&F){C=new B.Node.create(B.substitute(A.PICKER_TMPL,{buttonClass:E,pickerPosition:D}));G.append(C);this._picker=new F(H);this._picker.setValue(this._value);this._picker.render(C);this._picker.on("picker:onChange",B.bind(this._onPickerChange,this));}},_onClick:function(C){var E=this.get("contentBox"),D=this.get("pickerObj");if(E&&D){this.fire("button:onClick");if(this._picker){this.hidePicker();}else{this.showPicker();}}C.stopPropagation();},_onPickerChange:function(D){var C=this._picker?this._picker.getValue():null;if(C){this.setValue(C);this.hidePicker();this.fire("button:onChange");}},getPrevious:function(){return this._previous;},getValue:function(){return this._value;},setValue:function(C){this._previous=this._value;this._value=C;}});B.namespace("Bewype");B.Bewype.ButtonPicker=A;},"@VERSION@",{requires:["bewype-button-base","bewype-picker"]});