YUI.add("bewype-picker-color",function(C){var B="",D="",A=function(E){A.superclass.constructor.apply(this,arguments);};B+='<div id="{pickerClass}"><table>';B+="  <tr>";B+="    <td>";B+='      <div id="{pickerClass}-selector">';B+='        <img id="{pickerClass}-selector-bg" src="{pickerDir}/picker-{pickerSize}.png" />';B+="      </div>";B+="    </td>";B+="    <td>";B+='      <div id="{pickerClass}-hue">';B+='        <img id="{pickerClass}-hue-bg" src="{pickerDir}/hue-{pickerSize}.png" />';B+="      </div>";B+="    </td>";B+="    <td>";B+='      <div id="{pickerClass}-slider" class="{sliderSkin}"></div>';B+="    </td>";B+="    <td>";B+='      <div id="{pickerClass}-preview"></div>';B+="      <p>";B+='        <div id="{pickerClass}-r" class="{pickerClass}-rgb"></div>';B+='        <div id="{pickerClass}-g" class="{pickerClass}-rgb"></div>';B+='        <div id="{pickerClass}-b" class="{pickerClass}-rgb"></div>';B+="      </p>";B+="    </td>";B+="  </tr>";B+="</table></div>";D+="<b>{rgb}</b>{value}";A.NAME="pickerColor";A.ATTRS={pickerClass:{value:"yui3-picker-color",writeOnce:true,validator:function(E){return C.Lang.isString(E);}},pickerSize:{value:180,writeOnce:true,validator:function(E){return C.Lang.isNumber(E);}},pickerThreshold:{value:4,writeOnce:true,validator:function(E){return C.Lang.isNumber(E);}},sliderSkin:{value:"yui3-skin-sam",writeOnce:true,validator:function(E){return C.Lang.isString(E);}}};C.extend(A,C.Widget,{_slider:null,_hexvalue:null,_size:null,_x:null,_y:null,initializer:function(E){this.publish("picker:onChange");},renderUI:function(){var J=this.get("contentBox"),K=this.get("pickerSize"),H=this.get("pickerClass"),G=(K==180)?H:H+"-small",I=(K==180)?192:102,E=null,F=null;E=new C.Node.create(C.substitute(B,{pickerClass:G,pickerDir:C.config.base+"bewype-picker/assets",pickerSize:K,sliderSkin:this.get("sliderSkin")}));J.append(E);F=C.one("#"+G+"-selector");C.on("yui3-picker-event|click",C.bind(this._onSelectorClick,this),F);C.on("yui3-picker-event|mousemove",C.bind(this._onSelectorChange,this),F);this._slider=new C.Slider({axis:"y",min:-179,max:180,value:-1,length:I+"px",after:{valueChange:C.bind(this._onSliderChange,this)}});this._slider.render("#"+G+"-slider");this._onSliderChange();},bindUI:function(){},syncUI:function(){this._onSliderChange();},destructor:function(){var G=this.get("contentBox"),I=this.get("pickerSize"),F=this.get("pickerClass"),H=(I==180)?"#"+F:"#"+F+"-small",E=G.one(H);if(E){C.detach("yui3-picker-event|click");C.detach("yui3-picker-event|mousemove");E.remove();}},getValue:function(){return this._hexvalue?"#"+this._hexvalue.toLowerCase():"#000000";},_getRgbInnerHtml:function(E,F){return C.substitute(D,{rgb:E,value:F});},_onSelectorClick:function(E){var G=E?E.target:null,I=this.get("pickerSize"),H=this.get("pickerClass"),F=(I==180)?H:H+"-small";if(!E||G.get("id")===F+"-selector-bg"){this.fire("picker:onChange");}},_onSelectorChange:function(L){var F=L?L.target:null,K=this.get("pickerSize"),G=this.get("pickerThreshold"),U=this.get("pickerClass"),M=(K==180)?U:U+"-small",J=this._slider?this._slider.getValue():0,P=0,O=0,H=0,T=0,R=0,I=[],N="",S=C.one("#"+M+"-preview"),Q=C.one("#"+M+"-r"),E=C.one("#"+M+"-g"),V=C.one("#"+M+"-b");if(L){P=L.pageX-F.get("x");O=L.pageY-F.get("y");P=(K==180)?P:P*2;O=(K==180)?O:O*2;this._x=(P<=G)?0:((P>=180-G)?180:P);this._y=(O<=G)?0:((O>=180-G)?180:O);}else{this._x=90;this._y=90;}if(!L||F.get("id")===M+"-selector-bg"){H=(180-J);T=this._x/180;R=(180-this._y)/180;I=C.Bewype.Color.hsv2rgb((H==180)?0:H,T,R);this._hexvalue=C.Bewype.Color.rgb2hex(I[0],I[1],I[2]);N+="rgb(";N+=I[0]+", ";N+=I[1]+", ";N+=I[2];N+=")";S.setStyle("backgroundColor",N);Q.set("innerHTML",this._getRgbInnerHtml("R",I[0]));E.set("innerHTML",this._getRgbInnerHtml("G",I[1]));V.set("innerHTML",this._getRgbInnerHtml("B",I[2]));}},_onSliderChange:function(J){var F=this.get("pickerSize"),K=this.get("pickerClass"),I=(F==180)?K:K+"-small",M=J?J.newVal:0,H=(180-M),L=C.Bewype.Color.hsv2rgb((H==1)?0:H,1,1),E="",G=C.one("#"+I+"-selector");E+="rgb(";E+=L[0]+", ";E+=L[1]+", ";E+=L[2];E+=")";G.setStyle("backgroundColor",E);this._onSelectorChange();}});C.augment(A,C.EventTarget);C.namespace("Bewype");C.Bewype.PickerColor=A;},"@VERSION@",{requires:["bewype-color","slider","stylesheet","substitute","widget","yui-base"]});