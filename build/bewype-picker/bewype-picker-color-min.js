YUI.add("bewype-picker-color",function(c){var b="",d="",a=function(e){a.superclass.constructor.apply(this,arguments);};b+='<div class="{pickerClass}"><table>';b+="  <tr>";b+="    <td>";b+='      <div class="{pickerClass}-selector">';b+='        <img class="{pickerClass}-selector-bg" src="{pickerDir}/picker-{pickerSize}.png" />';b+="      </div>";b+="    </td>";b+="    <td>";b+='      <div class="{pickerClass}-hue">';b+='        <img class="{pickerClass}-hue-bg" src="{pickerDir}/hue-{pickerSize}.png" />';b+="      </div>";b+="    </td>";b+="    <td>";b+='      <div class="{pickerClass}-slider {sliderSkin}"></div>';b+="    </td>";b+="    <td>";b+='      <div class="{pickerClass}-preview"></div>';b+="      <p>";b+='        <div class="{pickerClass}-rgb {pickerClass}-r"></div>';b+='        <div class="{pickerClass}-rgb {pickerClass}-g"></div>';b+='        <div class="{pickerClass}-rgb {pickerClass}-b"></div>';b+="      </p>";b+="    </td>";b+="  </tr>";b+="</table></div>";d+="<b>{rgb}</b>{value}";a.NAME="pickerColor";a.ATTRS={pickerClass:{value:"bewype-picker-color",writeOnce:true,validator:function(e){return c.Lang.isString(e);}},pickerSize:{value:180,writeOnce:true,validator:function(e){return c.Lang.isNumber(e);}},pickerThreshold:{value:4,writeOnce:true,validator:function(e){return c.Lang.isNumber(e);}},sliderSkin:{value:"yui3-skin-sam",writeOnce:true,validator:function(e){return c.Lang.isString(e);}}};c.extend(a,c.Widget,{_slider:null,_hexvalue:null,_size:null,_x:null,_y:null,initializer:function(e){this.publish("picker:onChange");},renderUI:function(){var j=this.get("contentBox"),k=this.get("pickerSize"),h=this.get("pickerClass"),g=(k==180)?h:h+"-small",i=(k==180)?192:102,e=null,f=null;e=new c.Node.create(c.substitute(b,{pickerClass:g,pickerDir:c.config.base+"bewype-picker/assets",pickerSize:k,sliderSkin:this.get("sliderSkin")}));j.append(e);f=j.one("."+g+"-selector");c.on("yui3-picker-event|click",c.bind(this._onSelectorClick,this),f);c.on("yui3-picker-event|mousemove",c.bind(this._onSelectorChange,this),f);this._slider=new c.Slider({axis:"y",min:-179,max:180,value:-1,length:i+"px",after:{valueChange:c.bind(this._onSliderChange,this)}});this._slider.render(j.one("."+g+"-slider"));this._onSliderChange();},bindUI:function(){},syncUI:function(){this._onSliderChange();},destructor:function(){var h=this.get("contentBox"),i=this.get("pickerSize"),g=this.get("pickerClass"),f=(i==180)?"."+g:"."+g+"-small",e=h.one(f);if(e){c.detach("yui3-picker-event|click");c.detach("yui3-picker-event|mousemove");e.remove();}},setValue:function(e){this._hexvalue=e;},getValue:function(){return this._hexvalue?"#"+this._hexvalue.toLowerCase():"#000000";},_getRgbInnerHtml:function(e,f){return c.substitute(d,{rgb:e,value:f});},_onSelectorClick:function(e){var g=e?e.target:null,i=this.get("pickerSize"),h=this.get("pickerClass"),f=(i==180)?h:h+"-small";if(!e||g.get("className")===f+"-selector-bg"){this.fire("picker:onChange");}},_getNodePosition:function(g,f){var e=0;while(g!==null){e+=g.get(f);g=g.get("offsetParent");}return e;},_onSelectorChange:function(n){var m=this.get("contentBox"),l=this.get("pickerSize"),x=this.get("pickerClass"),o=(l==180)?x:x+"-small",g=n?n.target:null,h=this.get("pickerThreshold"),k=this._slider?this._slider.getValue():0,r=0,q=0,i=0,w=0,t=0,j=[],p="",v=m.one("."+o+"-preview"),s=m.one("."+o+"-r"),f=m.one("."+o+"-g"),y=m.one("."+o+"-b");if(g&&g.get("className")===o+"-selector-bg"){try{r=n.pageX-g.getX();q=n.pageY-g.getY();}catch(u){}r=(l==180)?r:r*2;q=(l==180)?q:q*2;this._x=(r<=h)?0:((r>=180-h)?180:r);this._y=(q<=h)?0:((q>=180-h)?180:q);}else{this._x=90;this._y=90;}if(!n||g.get("className")===o+"-selector-bg"){i=(180-k);w=this._x/180;t=(180-this._y)/180;j=c.Bewype.Color.hsv2rgb((i==180)?0:i,w,t);if(n||!this._hexvalue){this._hexvalue=c.Bewype.Color.rgb2hex(j[0],j[1],j[2]);}p+="rgb(";p+=j[0]+", ";p+=j[1]+", ";p+=j[2];p+=")";v.setStyle("backgroundColor",p);s.set("innerHTML",this._getRgbInnerHtml("R",j[0]));f.set("innerHTML",this._getRgbInnerHtml("G",j[1]));y.set("innerHTML",this._getRgbInnerHtml("B",j[2]));}},_onSliderChange:function(k){var j=this.get("contentBox"),f=this.get("pickerSize"),l=this.get("pickerClass"),i=(f==180)?l:l+"-small",n=k?k.newVal:0,h=(180-n),m=c.Bewype.Color.hsv2rgb((h==1)?0:h,1,1),e="",g=j.one("."+i+"-selector");e+="rgb(";e+=m[0]+", ";e+=m[1]+", ";e+=m[2];e+=")";g.setStyle("backgroundColor",e);this._onSelectorChange();}});c.augment(a,c.EventTarget);c.namespace("Bewype");c.Bewype.PickerColor=a;},"@VERSION@",{requires:["bewype-color","slider","stylesheet","substitute","widget","yui-base"]});