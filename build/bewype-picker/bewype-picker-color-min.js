YUI.add("bewype-picker-color",function(C){var B="",D="",A=function(E){A.superclass.constructor.apply(this,arguments);};B+='<div class="{pickerClass}"><table>';B+="  <tr>";B+="    <td>";B+='      <div class="{pickerClass}-selector">';B+='        <img class="{pickerClass}-selector-bg" src="{pickerDir}/picker-{pickerSize}.png" />';B+="      </div>";B+="    </td>";B+="    <td>";B+='      <div class="{pickerClass}-hue">';B+='        <img class="{pickerClass}-hue-bg" src="{pickerDir}/hue-{pickerSize}.png" />';B+="      </div>";B+="    </td>";B+="    <td>";B+='      <div class="{pickerClass}-slider {sliderSkin}"></div>';B+="    </td>";B+="    <td>";B+='      <div class="{pickerClass}-preview"></div>';B+="      <p>";B+='        <div class="{pickerClass}-rgb {pickerClass}-r"></div>';B+='        <div class="{pickerClass}-rgb {pickerClass}-g"></div>';B+='        <div class="{pickerClass}-rgb {pickerClass}-b"></div>';B+="      </p>";B+="    </td>";B+="  </tr>";B+="</table></div>";D+="<b>{rgb}</b>{value}";A.NAME="pickerColor";A.ATTRS={pickerClass:{value:"yui3-picker-color",writeOnce:true,validator:function(E){return C.Lang.isString(E);}},pickerSize:{value:180,writeOnce:true,validator:function(E){return C.Lang.isNumber(E);}},pickerThreshold:{value:4,writeOnce:true,validator:function(E){return C.Lang.isNumber(E);}},sliderSkin:{value:"yui3-skin-sam",writeOnce:true,validator:function(E){return C.Lang.isString(E);}}};C.extend(A,C.Widget,{_slider:null,_hexvalue:null,_size:null,_x:null,_y:null,initializer:function(E){this.publish("picker:onChange");},renderUI:function(){var J=this.get("contentBox"),K=this.get("pickerSize"),H=this.get("pickerClass"),G=(K==180)?H:H+"-small",I=(K==180)?192:102,E=null,F=null;E=new C.Node.create(C.substitute(B,{pickerClass:G,pickerDir:C.config.base+"bewype-picker/assets",pickerSize:K,sliderSkin:this.get("sliderSkin")}));J.append(E);F=J.one("."+G+"-selector");C.on("yui3-picker-event|click",C.bind(this._onSelectorClick,this),F);C.on("yui3-picker-event|mousemove",C.bind(this._onSelectorChange,this),F);this._slider=new C.Slider({axis:"y",min:-179,max:180,value:-1,length:I+"px",after:{valueChange:C.bind(this._onSliderChange,this)}});this._slider.render(J.one("."+G+"-slider"));this._onSliderChange();},bindUI:function(){},syncUI:function(){this._onSliderChange();},destructor:function(){var H=this.get("contentBox"),I=this.get("pickerSize"),G=this.get("pickerClass"),F=(I==180)?"."+G:"."+G+"-small",E=H.one(F);if(E){C.detach("yui3-picker-event|click");C.detach("yui3-picker-event|mousemove");E.remove();}},getValue:function(){return this._hexvalue?"#"+this._hexvalue.toLowerCase():"#000000";},_getRgbInnerHtml:function(E,F){return C.substitute(D,{rgb:E,value:F});},_onSelectorClick:function(E){var G=E?E.target:null,I=this.get("pickerSize"),H=this.get("pickerClass"),F=(I==180)?H:H+"-small";if(!E||G.get("id")===F+"-selector-bg"){this.fire("picker:onChange");}},_onSelectorChange:function(M){var L=this.get("contentBox"),F=M?M.target:null,K=this.get("pickerSize"),G=this.get("pickerThreshold"),V=this.get("pickerClass"),N=(K==180)?V:V+"-small",J=this._slider?this._slider.getValue():0,Q=0,P=0,H=0,U=0,S=0,I=[],O="",T=L.one("."+N+"-preview"),R=L.one("."+N+"-r"),E=L.one("."+N+"-g"),W=L.one("."+N+"-b");if(M){Q=M.pageX-F.get("x");P=M.pageY-F.get("y");Q=(K==180)?Q:Q*2;P=(K==180)?P:P*2;this._x=(Q<=G)?0:((Q>=180-G)?180:Q);this._y=(P<=G)?0:((P>=180-G)?180:P);}else{this._x=90;this._y=90;}if(!M||F.get("id")===N+"-selector-bg"){H=(180-J);U=this._x/180;S=(180-this._y)/180;I=C.Bewype.Color.hsv2rgb((H==180)?0:H,U,S);this._hexvalue=C.Bewype.Color.rgb2hex(I[0],I[1],I[2]);O+="rgb(";O+=I[0]+", ";O+=I[1]+", ";O+=I[2];O+=")";T.setStyle("backgroundColor",O);R.set("innerHTML",this._getRgbInnerHtml("R",I[0]));E.set("innerHTML",this._getRgbInnerHtml("G",I[1]));W.set("innerHTML",this._getRgbInnerHtml("B",I[2]));}},_onSliderChange:function(K){var J=this.get("contentBox"),F=this.get("pickerSize"),L=this.get("pickerClass"),I=(F==180)?L:L+"-small",N=K?K.newVal:0,H=(180-N),M=C.Bewype.Color.hsv2rgb((H==1)?0:H,1,1),E="",G=J.one("."+I+"-selector");E+="rgb(";E+=M[0]+", ";E+=M[1]+", ";E+=M[2];E+=")";G.setStyle("backgroundColor",E);this._onSelectorChange();}});C.augment(A,C.EventTarget);C.namespace("Bewype");C.Bewype.PickerColor=A;},"@VERSION@",{requires:["bewype-color","slider","stylesheet","substitute","widget","yui-base"]});